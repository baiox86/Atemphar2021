{"remainingRequest":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Projeto Final\\Entrega\\Software\\Frontend\\src\\components\\LoginScreen.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\src\\components\\LoginScreen.vue","mtime":1617391304096},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* eslint-disable */\nvar axios = require(\"axios\");\n\naxios.interceptors.response.use(function (response) {\n  return response;\n}, function (error) {\n  if (error.response.status === 401) {\n    bus.$emit(\"logout\");\n  }\n});\nvar instance = axios.create({\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n}); //import router from \"../router\"\n\nexport default {\n  name: \"LoginScreen\",\n  data: function data() {\n    var here = this;\n    return {\n      input: {\n        username: \"\",\n        password: \"\"\n      },\n      changePassBool: false,\n      alertBool: false,\n      alertString: \"Foi enviado um email com instruções.\"\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    axios.get(\"api/validateToken\", {\n      withCredentials: true,\n      headers: {\n        Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n      }\n    }).then(function (response) {\n      if (response.status === 201) {\n        _this.$emit(\"auth\", true);\n      }\n\n      if (response.status === 401) {\n        _this.$emit(\"auth\", false);\n      }\n    });\n  },\n  activated: function activated() {\n    this.input.username = \"\";\n    this.input.password = \"\";\n  },\n  methods: {\n    alterPass: function alterPass() {\n      var _this2 = this;\n\n      instance.post(\"api/requestPasswordReset\", {\n        username: this.input.username.replace(/[\"\\\"\\'\"]/g, \"\")\n      }).then(function (response) {\n        _this2.alertString = \"Foi enviado um email com instruções.\";\n\n        _this2.showAlert();\n      }).catch(function (error) {\n        _this2.alertString = \"Ocorreu um erro\";\n\n        _this2.showAlert();\n      });\n    },\n    showAlert: function showAlert() {\n      this.alertBool = true;\n    },\n    show: function show() {\n      this.changePassBool = true;\n    },\n    hide: function hide() {\n      this.changePassBool = false;\n      this.alertBool = false;\n    },\n    doLogin: function doLogin(event) {\n      var _this3 = this;\n\n      var data = {\n        username: this.input.username.replace(/[\"\\\"\\'\"]/g, \"\"),\n        password: this.input.password.replace(/[\"\\\"\\'\"]/g, \"\")\n      };\n      axios.post(\"api/login\", data).then(function (response) {\n        sessionStorage.setItem(\"token\", response.data.token);\n\n        _this3.$emit(\"auth\", true);\n      }).catch(function (errors) {\n        _this3.$toasted.error(\"Email ou Password incorrectos!\");\n      });\n    }\n  }\n};",{"version":3,"sources":["LoginScreen.vue"],"names":[],"mappings":"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","sourcesContent":["\n<template>\n  <div class=\"login\">\n    <br>\n    <template v-if=\"!this.changePassBool\">\n      <div id=\"fazerLogin\" class=\"w3-panel\">\n        <h1>Login</h1>\n        <div id=\"fields\" class=\"campos\">\n          <form>\n          <label>\n            <input type=\"email\" name=\"username\" v-model=\"input.username\" placeholder=\"Username\">\n          </label>\n          <label>\n            <input type=\"password\" name=\"password\" v-model=\"input.password\" placeholder=\"Password\">\n          </label>\n          <br>\n          <div class=\"buttons\">\n            <label>\n              <button type=\"submit\" v-on:click.prevent=\"doLogin()\">Login</button>\n            </label>\n            \n            <br>\n            <label class=\"reset\">\n              <a v-on:click.prevent=\"show()\">Esqueci-me da password</a>\n            </label>\n          </div>\n          </form>\n        </div>\n      </div>\n    </template>\n    <template v-else>\n      <div id=\"mudarPass\" class=\"w3-panel\">\n        <div id=\"fields\" class=\"camposMudarPass\">\n          <h3>Alterar Password</h3>\n          <label>\n            Introduza o seu email:\n            <input type=\"email\" v-model=\"input.username\" placeholder=\"e-mail\">\n          </label>\n          <label class=\"btnEnviar\">\n            <button v-on:click.prevent=\"alterPass()\">Enviar</button>\n          </label>\n          <label class=\"btnCancelar\">\n            <button v-on:click.prevent=\"hide()\">Cancelar</button>\n          </label>\n        </div>\n      </div>\n      <template v-if=\"alertBool\">{{this.alertString}}</template>\n    </template>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nvar axios = require(\"axios\");\naxios.interceptors.response.use(\n  response => response,\n  error => {\n      if (error.response.status === 401) { \n        bus.$emit(\"logout\");\n      }\n });\n var instance = axios.create({\n          validateStatus: function (status) {\n            return status >= 200 && status < 300;\n          }\n      });\n\n//import router from \"../router\"\nexport default {\n  name: \"LoginScreen\",\n  data() {\n    var here = this;\n    return {\n      input: {\n        username: \"\",\n        password: \"\"\n      },\n      changePassBool: false,\n      alertBool: false,\n      alertString: \"Foi enviado um email com instruções.\"\n    };\n  },\n  mounted() {\n    axios\n      .get(\"api/validateToken\", {\n        withCredentials: true,\n        headers: { Authorization: `Bearer ` + sessionStorage.getItem(\"token\") }\n      })\n      .then(response => {\n        if (response.status === 201) {\n          this.$emit(\"auth\", true);\n        }\n        if (response.status === 401) {\n          this.$emit(\"auth\", false);\n        }\n      });\n  },\n  activated() {\n    this.input.username = \"\";\n    this.input.password = \"\";\n  },\n  methods: {\n     alterPass: function() {\n      instance\n        .post(\"api/requestPasswordReset\", {\n          username: this.input.username.replace(/[\"\\\"\\'\"]/g, \"\")},\n        )\n        .then(response => {\n              this.alertString = \"Foi enviado um email com instruções.\";\n              this.showAlert()\n        })\n         .catch(error =>{\n          this.alertString = \"Ocorreu um erro\";\n          this.showAlert()\n        });\n    },\n    showAlert: function() {\n      this.alertBool = true;\n    },\n    show: function() {\n      this.changePassBool = true;\n    },\n    hide: function() {\n      this.changePassBool = false;\n      this.alertBool = false;\n    },\n    doLogin: function(event) {\n\n      let data = {\n        username: this.input.username.replace(/[\"\\\"\\'\"]/g, \"\"),\n        password: this.input.password.replace(/[\"\\\"\\'\"]/g, \"\")\n      };\n\n      axios\n        .post(\"api/login\", data)\n        .then(response => {\n          sessionStorage.setItem(\"token\", response.data.token);\n          this.$emit(\"auth\", true);\n        })\n        .catch(errors => {\n\n          this.$toasted.error(\"Email ou Password incorrectos!\");\n        });\n    }\n  }\n};\n</script>\n\n<style>\n@import url(\"https://fonts.googleapis.com/css?family=Open+Sans\");\n@import url(\"https://www.w3schools.com/w3css/4/w3.css\");\n\n#fazerLogin {\n  width: 30%;\n  padding: 10px;\n  border: 3px solid lightgray;\n  overflow: hidden;\n}\n\n#mudarPass {\n  padding: 10px;\n  border: 3px solid lightgray;\n  width: 25%;\n}\n\n.login {\n  font-family: \"Open Sans\";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n#fields {\n  padding: 3px;\n}\n\n.login .campos input {\n  margin-bottom: 15px;\n  width: 100%;\n}\n\n.login .campos button {\n  cursor: pointer;\n}\n\n.login .campos .buttons {\n  display: flex;\n}\n\n\n\n.login .campos a {\n  cursor: pointer;\n  display: inline-block;\n  margin-left: 10px;\n  color: #0645ad;\n  text-decoration: underline;\n}\n\n\n.login .camposMudarPass button {\n  cursor: pointer;\n}\n\n.login .camposMudarPass .btnEnviar {\n  margin-left: 10px;\n}\n\n.login .camposMudarPass input {\n  width: 75%;\n}\n</style>"],"sourceRoot":"src/components"}]}