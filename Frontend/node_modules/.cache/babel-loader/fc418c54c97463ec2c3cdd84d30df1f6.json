{"remainingRequest":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Projeto Final\\Entrega\\Software\\Frontend\\src\\components\\edits\\EditarApoio.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\src\\components\\edits\\EditarApoio.vue","mtime":1617391304198},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* eslint-disable */\nvar axios = require(\"axios\");\n\naxios.interceptors.response.use(function (response) {\n  return response;\n}, function (error) {\n  if (error.response.status === 401) {\n    bus.$emit(\"logout\");\n  }\n});\nimport { ModelListSelect } from \"vue-search-select\";\nimport { bus } from \"../../main.js\";\nexport default {\n  activated: function activated() {\n    var _this = this;\n\n    this.input.inputStaff = this.dadosApoio.idStaff;\n    this.input.inputEventos = this.dadosApoio.idEvento;\n    this.input.descricao = this.dadosApoio.descricao;\n    this.input.dataInicio = this.dadosApoio.dataInicio.substring(0, 22);\n    this.input.dataFim = this.dadosApoio.dataFim.substring(0, 22);\n    this.input.pontos = this.dadosApoio.pontos;\n    axios.get(\"api/getAllStaff\", {\n      withCredentials: true,\n      headers: {\n        Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n      }\n    }).then(function (response) {\n      _this.allStaff = response.data;\n\n      _this.allStaff.push();\n\n      if (errors.response.status === 401) {\n        _this.$toasted.error(\"Sessão expirou.\");\n\n        bus.$emit(\"logout\");\n      }\n    }).catch(function (error) {\n      _this.error = error;\n    });\n    axios.get(\"api/getAllEventos\", {\n      withCredentials: true,\n      headers: {\n        Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n      }\n    }).then(function (response) {\n      _this.allEvents = response.data;\n\n      if (errors.response.status === 401) {\n        _this.$toasted.error(\"Sessão expirou.\");\n\n        bus.$emit(\"logout\");\n      }\n    }).catch(function (error) {\n      _this.error = error;\n    });\n    axios.get(\"api/getAllPessoas\", {\n      withCredentials: true,\n      headers: {\n        Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n      }\n    }).then(function (response) {\n      _this.allPessoa = response.data;\n\n      if (errors.response.status === 401) {\n        _this.$toasted.error(\"Sessão expirou.\");\n\n        bus.$emit(\"logout\");\n      }\n    }).catch(function (error) {\n      _this.error = error;\n    });\n    axios.get(\"api/getAllPessoasNotStaff\", {\n      withCredentials: true,\n      headers: {\n        Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n      }\n    }).then(function (response) {\n      _this.allPessoasNotStaff = response.data;\n\n      if (errors.response.status === 401) {\n        _this.$toasted.error(\"Sessão expirou.\");\n\n        bus.$emit(\"logout\");\n      }\n    }).catch(function (error) {\n      _this.error = error;\n    });\n  },\n  props: {\n    dadosApoio: {\n      required: true\n    }\n  },\n  deactivated: function deactivated() {\n    this.clearfields();\n  },\n  data: function data() {\n    var here = this;\n    return {\n      input: {\n        inputStaff: \"\",\n        inputPessoa: \"\",\n        inputEventos: \"\",\n        descricao: \"\",\n        dataInicio: \"\",\n        dataFim: \"\",\n        pontos: \"\"\n      },\n      inputPessoa: {\n        nome: \"\",\n        inputPessoa: \"\",\n        email: \"\",\n        genero: \"\",\n        telefone: \"\",\n        zona: \"\",\n        nif: \"\",\n        comoConheceu: \"Pessoa\",\n        atravesDe: \"\"\n      },\n      allStaff: [],\n      allEvents: [],\n      allPessoasNotStaff: [],\n      allPessoa: [],\n      dataEvento: \"\",\n      isNovoStaff: false,\n      isNovaPessoa: false,\n      buttonTextPessoa: \"Nova Pessoa\",\n      buttonTextStaff: \"Promover\"\n    };\n  },\n  watch: {\n    'input.inputEventos': function inputInputEventos() {\n      var _this2 = this;\n\n      axios.get(\"api/getDadosEvento/\" + this.input.inputEventos, {\n        withCredentials: true,\n        headers: {\n          Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n        }\n      }).then(function (response) {\n        _this2.dataEvento = response.data[0].dataEvento;\n        _this2.countInqueritos = _this2.inqueritosData.length;\n      }).catch(function (error) {\n        if (error.response.status === 401) {\n          _this2.$toasted.error(\"Sessão expirou.\");\n\n          bus.$emit(\"logout\");\n        }\n      });\n    }\n  },\n  methods: {\n    toggleNovoStaff: function toggleNovoStaff() {\n      this.isNovoStaff = !this.isNovoStaff;\n\n      if (this.isNovoStaff) {\n        this.buttonTextStaff = \"Cancelar\";\n      } else {\n        this.buttonTextStaff = \"Promover\";\n      }\n    },\n    toggleNovaPessoa: function toggleNovaPessoa() {\n      this.isNovaPessoa = !this.isNovaPessoa;\n\n      if (this.isNovaPessoa) {\n        this.buttonTextPessoa = \"Cancelar\";\n      } else {\n        this.buttonTextPessoa = \"Nova Pessoa\";\n      }\n    },\n    clearfields: function clearfields() {\n      this.input.inputStaff = \"\";\n      this.input.inputEventos = \"\";\n      this.input.descricao = \"\";\n      this.input.dataInicio = \"\";\n      this.input.dataFim = \"\";\n      this.input.pontos = \"\";\n      this.isNovoStaff = false;\n      this.isNovaPessoa = false;\n    },\n    switchComponent: function switchComponent(comp) {\n      bus.$emit(\"switchComp\", comp);\n    },\n    submit: function submit() {\n      var _this3 = this;\n\n      var idStaffAux; //se não for um staff já existente\n\n      if (this.isNovaPessoa || this.isNovoStaff) {\n        //se for uma pessoa completamente nova\n        if (this.isNovaPessoa) {//post pessoa\n        } else if (this.isNovoStaff) {\n          idStaffAux = this.input.inputPessoa;\n        } //promover pessoa\n        //código de promoção aqui\n\n      } else {\n        //é um staff já existente\n        idStaffAux = this.input.inputStaff;\n      }\n\n      if (idStaffAux === \"\" || idStaffAux == null || this.input.inputEventos === \"\" || this.input.inputEventos == null || this.input.dataInicio === \"\" || this.input.dataInicio == null || this.input.dataFim === \"\" || this.input.dataFim == null || this.input.pontos === \"\" || this.input.pontos == null) {\n        this.$toasted.error(\"Por favor preencher todos os campos obrigatórios.\");\n        return;\n      }\n\n      if (this.input.pontos < 0) {\n        this.$toasted.error(\"Os pontos não podem ser um valor negativo!\");\n        return;\n      }\n\n      if (this.input.dataInicio > this.input.dataFim) {\n        this.$toasted.error(\"A data de início do apoio não pode ser posterior à data de fim!\");\n        return;\n      }\n\n      axios.put(\"api/editApoio/\" + this.dadosApoio.idApoio, {\n        idStaff: idStaffAux,\n        idEvento: this.input.inputEventos,\n        descricao: this.input.descricao,\n        dataInicio: this.input.dataInicio,\n        dataFim: this.input.dataFim,\n        pontos: this.input.pontos\n      }, {\n        withCredentials: true,\n        headers: {\n          Authorization: \"Bearer \" + sessionStorage.getItem(\"token\")\n        }\n      }).then(function (response) {\n        if (response.status === 201) {\n          _this3.$toasted.error(\"Apoio inserido com sucesso!\");\n\n          _this3.clearfields();\n\n          _this3.switchComponent('PersonsTablesMenu');\n        }\n      }).catch(function (errors, response) {\n        if (errors.response.status === 400) {\n          _this3.$toasted.error(\"Campos incorrectos ou incompletos!\");\n        }\n      });\n    }\n  },\n  components: {\n    ModelListSelect: ModelListSelect\n  }\n};",{"version":3,"sources":["EditarApoio.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8KA;AACA,IAAA,KAAA,GAAA,OAAA,CAAA,OAAA,CAAA;;AACA,KAAA,CAAA,YAAA,CAAA,QAAA,CAAA,GAAA,CACA,UAAA,QAAA;AAAA,SAAA,QAAA;AAAA,CADA,EAEA,UAAA,KAAA,EAAA;AACA,MAAA,KAAA,CAAA,QAAA,CAAA,MAAA,KAAA,GAAA,EAAA;AACA,IAAA,GAAA,CAAA,KAAA,CAAA,QAAA;AACA;AACA,CANA;AAQA,SAAA,eAAA,QAAA,mBAAA;AACA,SAAA,GAAA;AACA,eAAA;AACA,EAAA,SADA,uBACA;AAAA;;AACA,SAAA,KAAA,CAAA,UAAA,GAAA,KAAA,UAAA,CAAA,OAAA;AACA,SAAA,KAAA,CAAA,YAAA,GAAA,KAAA,UAAA,CAAA,QAAA;AACA,SAAA,KAAA,CAAA,SAAA,GAAA,KAAA,UAAA,CAAA,SAAA;AACA,SAAA,KAAA,CAAA,UAAA,GAAA,KAAA,UAAA,CAAA,UAAA,CAAA,SAAA,CAAA,CAAA,EAAA,EAAA,CAAA;AACA,SAAA,KAAA,CAAA,OAAA,GAAA,KAAA,UAAA,CAAA,OAAA,CAAA,SAAA,CAAA,CAAA,EAAA,EAAA,CAAA;AACA,SAAA,KAAA,CAAA,MAAA,GAAA,KAAA,UAAA,CAAA,MAAA;AACA,IAAA,KAAA,CACA,GADA,CACA,iBADA,EACA;AACA,MAAA,eAAA,EAAA,IADA;AAEA,MAAA,OAAA,EAAA;AAAA,QAAA,aAAA,EAAA,YAAA,cAAA,CAAA,OAAA,CAAA,OAAA;AAAA;AAFA,KADA,EAKA,IALA,CAKA,UAAA,QAAA,EAAA;AACA,MAAA,KAAA,CAAA,QAAA,GAAA,QAAA,CAAA,IAAA;;AACA,MAAA,KAAA,CAAA,QAAA,CAAA,IAAA;;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,MAAA,KAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,iBAAA;;AACA,QAAA,GAAA,CAAA,KAAA,CAAA,QAAA;AACA;AACA,KAZA,EAaA,KAbA,CAaA,UAAA,KAAA,EAAA;AACA,MAAA,KAAA,CAAA,KAAA,GAAA,KAAA;AACA,KAfA;AAgBA,IAAA,KAAA,CACA,GADA,CACA,mBADA,EACA;AACA,MAAA,eAAA,EAAA,IADA;AAEA,MAAA,OAAA,EAAA;AAAA,QAAA,aAAA,EAAA,YAAA,cAAA,CAAA,OAAA,CAAA,OAAA;AAAA;AAFA,KADA,EAKA,IALA,CAKA,UAAA,QAAA,EAAA;AACA,MAAA,KAAA,CAAA,SAAA,GAAA,QAAA,CAAA,IAAA;;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,MAAA,KAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,iBAAA;;AACA,QAAA,GAAA,CAAA,KAAA,CAAA,QAAA;AACA;AACA,KAXA,EAYA,KAZA,CAYA,UAAA,KAAA,EAAA;AACA,MAAA,KAAA,CAAA,KAAA,GAAA,KAAA;AACA,KAdA;AAeA,IAAA,KAAA,CACA,GADA,CACA,mBADA,EACA;AACA,MAAA,eAAA,EAAA,IADA;AAEA,MAAA,OAAA,EAAA;AAAA,QAAA,aAAA,EAAA,YAAA,cAAA,CAAA,OAAA,CAAA,OAAA;AAAA;AAFA,KADA,EAKA,IALA,CAKA,UAAA,QAAA,EAAA;AACA,MAAA,KAAA,CAAA,SAAA,GAAA,QAAA,CAAA,IAAA;;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,MAAA,KAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,iBAAA;;AACA,QAAA,GAAA,CAAA,KAAA,CAAA,QAAA;AACA;AACA,KAXA,EAYA,KAZA,CAYA,UAAA,KAAA,EAAA;AACA,MAAA,KAAA,CAAA,KAAA,GAAA,KAAA;AACA,KAdA;AAeA,IAAA,KAAA,CACA,GADA,CACA,2BADA,EACA;AACA,MAAA,eAAA,EAAA,IADA;AAEA,MAAA,OAAA,EAAA;AAAA,QAAA,aAAA,EAAA,YAAA,cAAA,CAAA,OAAA,CAAA,OAAA;AAAA;AAFA,KADA,EAKA,IALA,CAKA,UAAA,QAAA,EAAA;AACA,MAAA,KAAA,CAAA,kBAAA,GAAA,QAAA,CAAA,IAAA;;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,MAAA,KAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,iBAAA;;AACA,QAAA,GAAA,CAAA,KAAA,CAAA,QAAA;AACA;AACA,KAXA,EAYA,KAZA,CAYA,UAAA,KAAA,EAAA;AACA,MAAA,KAAA,CAAA,KAAA,GAAA,KAAA;AACA,KAdA;AAeA,GArEA;AAsEA,EAAA,KAAA,EAAA;AACA,IAAA,UAAA,EAAA;AACA,MAAA,QAAA,EAAA;AADA;AADA,GAtEA;AA2EA,EAAA,WA3EA,yBA2EA;AACA,SAAA,WAAA;AACA,GA7EA;AA8EA,EAAA,IA9EA,kBA8EA;AACA,QAAA,IAAA,GAAA,IAAA;AACA,WAAA;AACA,MAAA,KAAA,EAAA;AACA,QAAA,UAAA,EAAA,EADA;AAEA,QAAA,WAAA,EAAA,EAFA;AAGA,QAAA,YAAA,EAAA,EAHA;AAIA,QAAA,SAAA,EAAA,EAJA;AAKA,QAAA,UAAA,EAAA,EALA;AAMA,QAAA,OAAA,EAAA,EANA;AAOA,QAAA,MAAA,EAAA;AAPA,OADA;AAUA,MAAA,WAAA,EAAA;AACA,QAAA,IAAA,EAAA,EADA;AAEA,QAAA,WAAA,EAAA,EAFA;AAGA,QAAA,KAAA,EAAA,EAHA;AAIA,QAAA,MAAA,EAAA,EAJA;AAKA,QAAA,QAAA,EAAA,EALA;AAMA,QAAA,IAAA,EAAA,EANA;AAOA,QAAA,GAAA,EAAA,EAPA;AAQA,QAAA,YAAA,EAAA,QARA;AASA,QAAA,SAAA,EAAA;AATA,OAVA;AAqBA,MAAA,QAAA,EAAA,EArBA;AAsBA,MAAA,SAAA,EAAA,EAtBA;AAuBA,MAAA,kBAAA,EAAA,EAvBA;AAwBA,MAAA,SAAA,EAAA,EAxBA;AAyBA,MAAA,UAAA,EAAA,EAzBA;AA0BA,MAAA,WAAA,EAAA,KA1BA;AA2BA,MAAA,YAAA,EAAA,KA3BA;AA4BA,MAAA,gBAAA,EAAA,aA5BA;AA6BA,MAAA,eAAA,EAAA;AA7BA,KAAA;AA+BA,GA/GA;AAgHA,EAAA,KAAA,EAAA;AACA,0BAAA,6BAAA;AAAA;;AACA,MAAA,KAAA,CAAA,GAAA,CAAA,wBAAA,KAAA,KAAA,CAAA,YAAA,EAAA;AAAA,QAAA,eAAA,EAAA,IAAA;AAAA,QAAA,OAAA,EAAA;AAAA,UAAA,aAAA,EAAA,YAAA,cAAA,CAAA,OAAA,CAAA,OAAA;AAAA;AAAA,OAAA,EACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,QAAA,MAAA,CAAA,UAAA,GAAA,QAAA,CAAA,IAAA,CAAA,CAAA,EAAA,UAAA;AACA,QAAA,MAAA,CAAA,eAAA,GAAA,MAAA,CAAA,cAAA,CAAA,MAAA;AACA,OAJA,EAIA,KAJA,CAIA,UAAA,KAAA,EAAA;AAAA,YAAA,KAAA,CAAA,QAAA,CAAA,MAAA,KAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,iBAAA;;AACA,UAAA,GAAA,CAAA,KAAA,CAAA,QAAA;AACA;AAAA,OAPA;AAQA;AAVA,GAhHA;AA4HA,EAAA,OAAA,EAAA;AACA,IAAA,eAAA,EAAA,2BAAA;AACA,WAAA,WAAA,GAAA,CAAA,KAAA,WAAA;;AACA,UAAA,KAAA,WAAA,EAAA;AACA,aAAA,eAAA,GAAA,UAAA;AACA,OAFA,MAEA;AACA,aAAA,eAAA,GAAA,UAAA;AACA;AACA,KARA;AASA,IAAA,gBAAA,EAAA,4BAAA;AACA,WAAA,YAAA,GAAA,CAAA,KAAA,YAAA;;AACA,UAAA,KAAA,YAAA,EAAA;AACA,aAAA,gBAAA,GAAA,UAAA;AACA,OAFA,MAEA;AACA,aAAA,gBAAA,GAAA,aAAA;AACA;AACA,KAhBA;AAiBA,IAAA,WAAA,EAAA,uBAAA;AACA,WAAA,KAAA,CAAA,UAAA,GAAA,EAAA;AACA,WAAA,KAAA,CAAA,YAAA,GAAA,EAAA;AACA,WAAA,KAAA,CAAA,SAAA,GAAA,EAAA;AACA,WAAA,KAAA,CAAA,UAAA,GAAA,EAAA;AACA,WAAA,KAAA,CAAA,OAAA,GAAA,EAAA;AACA,WAAA,KAAA,CAAA,MAAA,GAAA,EAAA;AACA,WAAA,WAAA,GAAA,KAAA;AACA,WAAA,YAAA,GAAA,KAAA;AACA,KA1BA;AA2BA,IAAA,eA3BA,2BA2BA,IA3BA,EA2BA;AACA,MAAA,GAAA,CAAA,KAAA,CAAA,YAAA,EAAA,IAAA;AACA,KA7BA;AA8BA,IAAA,MAAA,EAAA,kBAAA;AAAA;;AACA,UAAA,UAAA,CADA,CAEA;;AACA,UAAA,KAAA,YAAA,IAAA,KAAA,WAAA,EAAA;AACA;AACA,YAAA,KAAA,YAAA,EAAA,CACA;AAEA,SAHA,MAGA,IAAA,KAAA,WAAA,EAAA;AACA,UAAA,UAAA,GAAA,KAAA,KAAA,CAAA,WAAA;AACA,SAPA,CAQA;AACA;;AACA,OAVA,MAUA;AACA;AACA,QAAA,UAAA,GAAA,KAAA,KAAA,CAAA,UAAA;AACA;;AAGA,UAAA,UAAA,KAAA,EAAA,IAAA,UAAA,IAAA,IAAA,IAAA,KAAA,KAAA,CAAA,YAAA,KAAA,EAAA,IAAA,KAAA,KAAA,CAAA,YAAA,IAAA,IAAA,IACA,KAAA,KAAA,CAAA,UAAA,KAAA,EADA,IACA,KAAA,KAAA,CAAA,UAAA,IAAA,IADA,IACA,KAAA,KAAA,CAAA,OAAA,KAAA,EADA,IACA,KAAA,KAAA,CAAA,OAAA,IAAA,IADA,IAEA,KAAA,KAAA,CAAA,MAAA,KAAA,EAFA,IAEA,KAAA,KAAA,CAAA,MAAA,IAAA,IAFA,EAEA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,mDAAA;AACA;AACA;;AAEA,UAAA,KAAA,KAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,4CAAA;AACA;AACA;;AAEA,UAAA,KAAA,KAAA,CAAA,UAAA,GAAA,KAAA,KAAA,CAAA,OAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,iEAAA;AACA;AACA;;AAGA,MAAA,KAAA,CACA,GADA,CAEA,mBAAA,KAAA,UAAA,CAAA,OAFA,EAGA;AACA,QAAA,OAAA,EAAA,UADA;AAEA,QAAA,QAAA,EAAA,KAAA,KAAA,CAAA,YAFA;AAGA,QAAA,SAAA,EAAA,KAAA,KAAA,CAAA,SAHA;AAIA,QAAA,UAAA,EAAA,KAAA,KAAA,CAAA,UAJA;AAKA,QAAA,OAAA,EAAA,KAAA,KAAA,CAAA,OALA;AAMA,QAAA,MAAA,EAAA,KAAA,KAAA,CAAA;AANA,OAHA,EAWA;AACA,QAAA,eAAA,EAAA,IADA;AAEA,QAAA,OAAA,EAAA;AACA,UAAA,aAAA,EAAA,YAAA,cAAA,CAAA,OAAA,CAAA,OAAA;AADA;AAFA,OAXA,EAkBA,IAlBA,CAkBA,UAAA,QAAA,EAAA;AACA,YAAA,QAAA,CAAA,MAAA,KAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,6BAAA;;AACA,UAAA,MAAA,CAAA,WAAA;;AACA,UAAA,MAAA,CAAA,eAAA,CAAA,mBAAA;AACA;AACA,OAxBA,EAyBA,KAzBA,CAyBA,UAAA,MAAA,EAAA,QAAA,EAAA;AACA,YAAA,MAAA,CAAA,QAAA,CAAA,MAAA,KAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,oCAAA;AACA;AAEA,OA9BA;AA+BA;AAlGA,GA5HA;AAgOA,EAAA,UAAA,EAAA;AACA,IAAA,eAAA,EAAA;AADA;AAhOA,CAAA","sourcesContent":["<template>\n  <div>\n    <br>\n    <h1>Editar Apoio</h1>\n    <br>\n    <div class=\"editarApoio\">\n      <div id=\"fields\" class=\"fields\">\n        <template v-if=\"!isNovoStaff\">\n          <div class=\"staff\">\n            <label>Staff:<i class=\"obrigatorio\">*</i></label>\n            <br>\n            <model-list-select\n              :list=\"allStaff\"\n              v-model=\"input.inputStaff\"\n              option-value=\"idStaff\"\n              option-text=\"nome\"\n              placeholder=\"Escolher\"\n            ></model-list-select>\n          </div>\n        </template>\n        <template v-else>\n        <template v-if=\"isNovoStaff && !isNovaPessoa\">\n          <div class=\"novoStaff\">\n            <label>Novo Membro do Staff:</label>\n            <model-list-select\n            :list=\"allPessoasNotStaff\"\n            v-model=\"input.inputStaff\"\n            option-value=\"idPessoa\"\n            option-text=\"nome\"\n            placeholder=\"Escolher\"\n          ></model-list-select>\n          </div>\n          \n        </template>\n        <template v-if=\"isNovaPessoa\">\n        <div class=\"nome\">\n          <label>Nome:</label>\n          <br>\n          <input type=\"text\" v-model=\"inputPessoa.nome\" name=\"nome\">\n        </div>\n        <div class=\"email\">\n          <label>Email:</label>\n          <br>\n          <input type=\"text\" v-model=\"inputPessoa.email\" name=\"email\">\n        </div>\n        <div class=\"telefone\">\n          <label>Telefone:</label>\n          <br>\n          <input type=\"text\" v-model=\"inputPessoa.telefone\" name=\"telefone\">\n        </div>\n        <div class=\"genero\">\n            <label>Género: </label>\n            <br>\n            <input type=\"radio\" v-model=\"inputPessoa.genero\" name=\"m\" value=\"M\" > M\n            <br>\n            <input type=\"radio\" v-model=\"inputPessoa.genero\" name=\"f\"  value=\"F\" > F\n            <br>\n        </div>\n        <div class=\"zona\">\n          <label>Zona:</label>\n          <br>\n          <input type=\"text\" v-model=\"inputPessoa.zona\" name=\"zona\">\n        </div>\n        <div class=\"idade\">\n          <label>Idade:</label>\n          <br>\n          <input type=\"text\" v-model=\"inputPessoa.idade\" name=\"idade\">\n        </div>\n        <div class=\"nif\">\n          <label>NIF:</label>\n          <br>\n          <input type=\"text\" v-model=\"inputPessoa.nif\" name=\"nif\">\n        </div>\n        <div class=\"comoConheceu\">\n          <label>Como Conheceu: </label>\n          <br>\n          <select v-model=\"inputPessoa.comoConheceu\">\n            <option>Pessoa</option>\n            <option value=\"Local\">Folheto em Local</option>\n            <option>Redes Sociais</option>\n            <option>E-Mail </option>\n          </select>\n          <template v-if=\"inputPessoa.comoConheceu === 'Pessoa' || inputPessoa.comoConheceu === 'Redes Sociais' || inputPessoa.comoConheceu === 'E-Mail'\">\n            <!-- conheceu através de uma pessoa -->\n            <!-- listar pessoas -->\n              <div class=\"atravesQuem\">\n                <model-list-select :list=\"allPessoa\"\n                     v-model=\"inputPessoa.atravesDe\"\n                     option-value=\"idPessoa\"\n                     option-text=\"nome\"\n                     placeholder=\"Escolher\">\n                </model-list-select>\n              </div>\n            \n          </template> \n            <template v-else-if=\"inputPessoa.comoConheceu === 'Local'\">\n            <!-- conheceu através de um folheto num local -->\n            <!--<label>Local:</label>\n              <br>-->\n              <div class=\"local\">\n                <input type=\"text\" v-model=\"inputPessoa.atravesDe\" name=\"local\" placeholder=\"Local\">\n              </div>\n            \n          </template>\n        </div>\n        </template>\n        <div class=\"botaoNovaPessoa\">\n          <a class=\"fas fa-user-plus\">\n            <input type=\"button\" v-model=\"buttonTextPessoa\" v-on:click=\"toggleNovaPessoa()\">\n          </a>\n          <br>\n        </div>\n        </template>\n        <div class=\"botaoNovoStaff\">\n            <a class=\"fas fa-user-plus\">\n              <input type=\"button\" v-model=\"buttonTextStaff\" v-on:click=\"toggleNovoStaff()\">\n            </a>\n            <br>\n        </div>\n        <div class=\"evento\">\n          <label>Evento: Data: {{this.dataEvento = null ? \"\" : this.dataEvento }}</label>\n          <br>\n          <model-list-select\n            :list=\"allEvents\"\n            v-model=\"input.inputEventos\"\n            option-value=\"idEvento\"\n            option-text=\"nomeEvento\"\n            placeholder=\"Escolher\"\n          ></model-list-select>\n        </div>\n        <div class=\"dataInicio\">\n          <label>Data Início:<i class=\"obrigatorio\">*</i></label>\n          <br>\n          <input\n            type=\"datetime-local\"\n            v-model=\"input.dataInicio\"\n            name=\"dataInicio\"\n            placeholder=\"Data Início\"\n          >\n        </div>\n\n        <div class=\"dataFim\">\n          <label>Data Fim:<i class=\"obrigatorio\">*</i></label>\n          <br>\n          <input\n            type=\"datetime-local\"\n            v-model=\"input.dataFim\"\n            name=\"dataFim\"\n            placeholder=\"Data Fim\"\n          >\n        </div>\n\n        <div class=\"descricao\">\n          <label>Descrição:</label>\n          <br>\n          <textarea type=\"text\" v-model=\"input.descricao\" name=\"descricao\"></textarea>\n        </div>\n\n        <div class=\"pontos\">\n          <label>Pontos:<i class=\"obrigatorio\">*</i></label>\n          <br>\n          <input type=\"number\" v-model=\"input.pontos\" name=\"pontos\" min=\"0\" max>\n        </div>\n        <div class=\"registar\">\n          <button class=\"registar\" type=\"submit\" v-on:click.prevent=\"submit()\">\n            <i class=\"far fa-save\"></i> Registar\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nvar axios = require(\"axios\");\naxios.interceptors.response.use(\n  response => response,\n  error => {\n      if (error.response.status === 401) { \n        bus.$emit(\"logout\");\n      }\n });\n\nimport { ModelListSelect } from \"vue-search-select\";\nimport { bus } from \"../../main.js\";\nexport default {\n  activated() {\n        this.input.inputStaff = this.dadosApoio.idStaff;\n        this.input.inputEventos = this.dadosApoio.idEvento;\n        this.input.descricao = this.dadosApoio.descricao;\n        this.input.dataInicio = this.dadosApoio.dataInicio.substring(0, 22);\n        this.input.dataFim =  this.dadosApoio.dataFim.substring(0, 22);\n        this.input.pontos = this.dadosApoio.pontos;\n    axios\n      .get(\"api/getAllStaff\", {\n        withCredentials: true,\n        headers: { Authorization: `Bearer ` + sessionStorage.getItem(\"token\") }\n      })\n      .then(response => {\n        this.allStaff = response.data;\n        this.allStaff.push();\n        if (errors.response.status === 401) {\n          this.$toasted.error(\"Sessão expirou.\");\n          bus.$emit(\"logout\");\n        }\n      })\n      .catch(error => {\n        this.error = error;\n      });\n    axios\n      .get(\"api/getAllEventos\", {\n        withCredentials: true,\n        headers: { Authorization: `Bearer ` + sessionStorage.getItem(\"token\") }\n      })\n      .then(response => {\n        this.allEvents = response.data;\n        if (errors.response.status === 401) {\n          this.$toasted.error(\"Sessão expirou.\");\n          bus.$emit(\"logout\");\n        }\n      })\n      .catch(error => {\n        this.error = error;\n      });\n    axios\n      .get(\"api/getAllPessoas\", {\n        withCredentials: true,\n        headers: { Authorization: `Bearer ` + sessionStorage.getItem(\"token\") }\n      })\n      .then(response => {\n        this.allPessoa = response.data;\n        if (errors.response.status === 401) {\n          this.$toasted.error(\"Sessão expirou.\");\n          bus.$emit(\"logout\");\n        }\n      })\n      .catch(error => {\n        this.error = error;\n      });\n    axios\n      .get(\"api/getAllPessoasNotStaff\", {\n        withCredentials: true,\n        headers: { Authorization: `Bearer ` + sessionStorage.getItem(\"token\") }\n      })\n      .then(response => {\n        this.allPessoasNotStaff = response.data;\n        if (errors.response.status === 401) {\n          this.$toasted.error(\"Sessão expirou.\");\n          bus.$emit(\"logout\");\n        }\n      })\n      .catch(error => {\n        this.error = error;\n      });\n  },\n  props: {\n    dadosApoio: {\n      required: true\n    }\n  },\n  deactivated() {\n    this.clearfields();\n  },\n  data() {\n    var here = this;\n    return {\n      input: {\n        inputStaff: \"\",\n        inputPessoa: \"\",\n        inputEventos: \"\",\n        descricao: \"\",\n        dataInicio: \"\",\n        dataFim: \"\",\n        pontos: \"\"\n      },\n      inputPessoa: {\n        nome: \"\",\n        inputPessoa: \"\",\n        email: \"\",\n        genero: \"\",\n        telefone: \"\",\n        zona: \"\",\n        nif: \"\",\n        comoConheceu: \"Pessoa\",\n        atravesDe: \"\"\n      },\n      allStaff: [],\n      allEvents: [],\n      allPessoasNotStaff: [],\n      allPessoa: [],\n      dataEvento: \"\",\n      isNovoStaff: false,\n      isNovaPessoa: false,\n      buttonTextPessoa: \"Nova Pessoa\",\n      buttonTextStaff:  \"Promover\"\n    };\n  },\n  watch: {\n      'input.inputEventos': function(){\n         axios.get(\"api/getDadosEvento/\" + this.input.inputEventos, {withCredentials: true, headers: { Authorization: `Bearer ` + sessionStorage.getItem(\"token\")}})\n            .then(response => {\n            this.dataEvento = response.data[0].dataEvento;\n            this.countInqueritos = this.inqueritosData.length;\n          }).catch(error => {if(error.response.status === 401){\n            this.$toasted.error(\"Sessão expirou.\");\n            bus.$emit(\"logout\");\n            }});\n      }\n  },\n  methods: {\n    toggleNovoStaff: function(){\n        this.isNovoStaff = !this.isNovoStaff\n      if(this.isNovoStaff){\n        this.buttonTextStaff = \"Cancelar\"\n      }else{\n        this.buttonTextStaff = \"Promover\"\n      }\n    },\n    toggleNovaPessoa: function() {\n        this.isNovaPessoa = !this.isNovaPessoa\n      if(this.isNovaPessoa){\n        this.buttonTextPessoa = \"Cancelar\"\n      }else{\n        this.buttonTextPessoa = \"Nova Pessoa\"\n      }\n    },\n    clearfields: function() {\n      this.input.inputStaff = \"\";\n      this.input.inputEventos = \"\";\n      this.input.descricao = \"\";\n      this.input.dataInicio = \"\";\n      this.input.dataFim = \"\";\n      this.input.pontos = \"\";\n      this.isNovoStaff = false;\n      this.isNovaPessoa = false;\n    },\n    switchComponent(comp) {\n      bus.$emit(\"switchComp\", comp);\n    },\n    submit: function() {\n      var idStaffAux\n      //se não for um staff já existente\n      if(this.isNovaPessoa || this.isNovoStaff){\n      //se for uma pessoa completamente nova\n        if(this.isNovaPessoa){\n        //post pessoa\n\n        }else if(this.isNovoStaff){\n            idStaffAux = this.input.inputPessoa;\n      }\n          //promover pessoa\n          //código de promoção aqui\n      }else{\n        //é um staff já existente\n            idStaffAux = this.input.inputStaff;\n      }\n\n      \n       if(idStaffAux === \"\" || idStaffAux == null || this.input.inputEventos === \"\" || this.input.inputEventos == null ||\n     this.input.dataInicio === \"\" || this.input.dataInicio == null || this.input.dataFim === \"\" || this.input.dataFim == null\n      || this.input.pontos === \"\" || this.input.pontos == null) {\n        this.$toasted.error(\"Por favor preencher todos os campos obrigatórios.\");\n        return;\n      }\n\n      if(this.input.pontos < 0){\n        this.$toasted.error(\"Os pontos não podem ser um valor negativo!\");\n        return;\n      }\n\n      if(this.input.dataInicio > this.input.dataFim){\n        this.$toasted.error(\"A data de início do apoio não pode ser posterior à data de fim!\");\n        return;\n      }\n\n\n      axios\n        .put(\n          \"api/editApoio/\" + this.dadosApoio.idApoio,\n          {\n            idStaff: idStaffAux,\n            idEvento: this.input.inputEventos,\n            descricao: this.input.descricao,\n            dataInicio: this.input.dataInicio,\n            dataFim: this.input.dataFim,\n            pontos: this.input.pontos\n          },\n          {\n            withCredentials: true,\n            headers: {\n              Authorization: `Bearer ` + sessionStorage.getItem(\"token\")\n            }\n          }\n        )\n        .then(response => {\n          if (response.status === 201) {\n            this.$toasted.error(\"Apoio inserido com sucesso!\");\n            this.clearfields();\n            this.switchComponent('PersonsTablesMenu');\n          }\n        })\n        .catch((errors, response) => {\n          if (errors.response.status === 400) {\n            this.$toasted.error(\"Campos incorrectos ou incompletos!\");\n          }\n\n        });\n    }\n  },\n  components: {\n    ModelListSelect\n  }\n};\n</script>\n\n<style>\n@import url(\"https://fonts.googleapis.com/css?family=Open+Sans\");\n@import url(\"https://www.w3schools.com/w3css/4/w3.css\");\n\nh1 {\n  text-align: center;\n  font-family: \"Open Sans\";\n}\n.editarApoio {\n  font-family: \"Open Sans\";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.editarApoio .fields {\n  display: inline-grid;\n  grid-row-gap: 10px;\n  grid-column-gap: 50px;\n  background-color: oldlace;\n  width: 100%;\n}\n.editarApoio .fields .obrigatorio{\n  color: red;\n}\n\n.editarApoio .staff {\n  grid-column-start: 1;\n  grid-row-start: 1;\n  margin-top: 10px;\n  margin-left: 115px;\n}\n\n.editarApoio .botaoNovoStaff {\n  margin-right: 115px;\n  grid-row-start: 1;\n  grid-column-start: 2;\n  justify-self: end;\n  margin-top: 30px;\n}\n\n.editarApoio .botaoNovoStaff input {\n  border: none;\n  background-color: transparent;\n  cursor: pointer;\n}\n.editarApoio .botaoNovoStaff a {\n  border: 1px solid #a1a0a0;\n  height: 20px;\n}\n\n.editarApoio .novoStaff {\n  grid-column-start: 1;\n  grid-row-start: 2;\n  margin-left: 115px;\n}\n.editarApoio .botaoNovaPessoa {\n  margin-right: 115px;\n  grid-row-start: 2;\n  grid-column-start: 2;\n  justify-self: end;\n  margin-top: 30px;\n}\n\n.editarApoio .botaoNovaPessoa input {\n  border: none;\n  background-color: transparent;\n  cursor: pointer;\n}\n.editarApoio .botaoNovaPessoa a {\n  border: 1px solid #a1a0a0;\n  height: 20px;\n}\n\n.editarApoio .nome {\n  margin-left: 115px;\n  grid-column-start: 1;\n  grid-row-start: 3;\n}\n\n.editarApoio .nome input {\n  width: 100%;\n  height: 35px;\n  border: 1px solid #a1a0a0;\n  padding-left: 3px;\n  border-radius: 4px;\n}\n\n.editarApoio .email {\n  margin-right: 115px;\n  grid-column-start: 2;\n  grid-row-start: 3;\n}\n\n.editarApoio .email input {\n  width: 100%;\n  height: 35px;\n  border: 1px solid #a1a0a0;\n  padding-left: 3px;\n  border-radius: 4px;\n}\n\n.editarApoio .telefone {\n  margin-left: 115px;\n  grid-column-start: 1;\n  grid-row-start: 4;\n}\n\n.editarApoio .telefone input {\n  width: 100%;\n  height: 35px;\n  border: 1px solid #a1a0a0;\n  padding-left: 3px;\n  border-radius: 4px;\n}\n\n.editarApoio .genero {\n  margin-right: 115px;\n  grid-column-start: 2;\n  grid-row-start: 4;\n}\n\n.editarApoio .idade {\n  margin-left: 115px;\n  grid-column-start: 1;\n  grid-row-start: 5;\n}\n\n.editarApoio .idade input {\n  width: 100%;\n  height: 35px;\n  border: 1px solid #a1a0a0;\n  padding-left: 3px;\n  border-radius: 4px;\n}\n\n.editarApoio .zona {\n  margin-right: 115px;\n  grid-column-start: 2;\n  grid-row-start: 5;\n}\n\n.editarApoio .zona input {\n  width: 100%;\n  height: 35px;\n  border: 1px solid #a1a0a0;\n  padding-left: 3px;\n  border-radius: 4px;\n}\n\n.editarApoio .nif {\n  margin-left: 115px;\n  grid-column-start: 1;\n  grid-row-start: 6;\n}\n\n.editarApoio .nif input {\n  width: 100%;\n  height: 35px;\n  border: 1px solid #a1a0a0;\n  padding-left: 3px;\n  border-radius: 4px;\n}\n\n.editarApoio .comoConheceu {\n  /*margin-right: 115px;*/\n  grid-column-start: 2;\n  grid-row-start: 6;\n  width: 50%;\n  display: -webkit-box;\n  height: 35px;\n}\n\n.editarApoio .comoConheceu select {\n  border: 1px solid #a1a0a0;\n  border-radius: 4px;\n  height: 30px;\n}\n\n.editarApoio .comoConheceu .atravesQuem {\n  margin-top: 11px;\n  width: 110%;\n  margin-left: 9px;\n}\n\n.editarApoio .comoConheceu .local {\n  margin-top: 16px;\n  width: 100%;\n  margin-left: 9px;\n}\n\n.editarApoio .comoConheceu .local input{\n  border: 1px solid #a1a0a0;\n  border-radius: 4px;\n  width: 110%;\n  height: 35px;\n}\n\n.editarApoio .evento {\n  grid-column-start: 1;\n  grid-row-start: 7;\n  margin-left: 115px;\n}\n\n.editarApoio .dataInicio {\n  margin-right: 115px;\n  grid-column-start: 2;\n  grid-row-start: 7;\n}\n.editarApoio .dataInicio input {\n  width: 100%;\n  height: 35px;\n  border: 1px solid #a1a0a0;\n  padding-left: 3px;\n  border-radius: 4px;\n}\n.editarApoio .dataFim {\n  margin-left: 115px;\n  grid-column-start: 1;\n  grid-row-start: 8;\n}\n.editarApoio .dataFim input {\n  width: 100%;\n  height: 35px;\n  border: 1px solid #a1a0a0;\n  padding-left: 3px;\n  border-radius: 4px;\n}\n.editarApoio .descricao {\n  margin-left: 115px;\n  grid-column-start: 1;\n  grid-row-start: 9;\n}\n.editarApoio .descricao textarea {\n  width: 100%;\n  height: 150px;\n  box-sizing: border-box;\n  border: 1px solid #a1a0a0;\n  resize: none;\n  border-radius: 4px;\n}\n.editarApoio .pontos {\n  margin-right: 115px;\n  grid-column-start: 2;\n  grid-row-start: 8;\n}\n.editarApoio .pontos input {\n  width: 100%;\n  border: 1px solid #a1a0a0;\n  padding-left: 3px;\n  height: 35px;\n  border-radius: 4px;\n}\n\n.editarApoio .registar {\n  margin-right: 115px;\n  margin-bottom: 15px;\n  grid-column-start: 2;\n  grid-row-start: 10;\n  align-self: end;\n  justify-self: end;\n}\n\n.editarApoio .registar button {\n  height: 50px;\n  font-size: medium;\n  cursor: pointer;\n  border: none;\n  background-color: #e99d72;\n  border-radius: 6px;\n  padding-left: 15px;\n  padding-right: 15px;\n  margin: auto;\n  margin-right: 15px;\n}\n.editarApoio .registar button:hover {\n  background-color: #fab995;\n}\n</style>"],"sourceRoot":"src/components/edits"}]}