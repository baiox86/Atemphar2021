{"remainingRequest":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Projeto Final\\Entrega\\Software\\Frontend\\src\\components\\tablecomponents\\inqueritos\\InqueritosTablesMenu.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\src\\components\\tablecomponents\\inqueritos\\InqueritosTablesMenu.vue","mtime":1617391305132},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8qIGVzbGludC1kaXNhYmxlICovCmltcG9ydCBGb3JtQWRkSW5xdWVyaXRvIGZyb20gIi4uLy4uL3JlZ2lzdG9zL0Zvcm1BZGRJbnF1ZXJpdG8iOwp2YXIgYXhpb3MgPSByZXF1aXJlKCJheGlvcyIpOwpheGlvcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKAogIHJlc3BvbnNlID0+IHJlc3BvbnNlLAogIGVycm9yID0+IHsKICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7IAogICAgICAgIGJ1cy4kZW1pdCgibG9nb3V0Iik7CiAgICAgIH0KIH0pOwoKdmFyIHNlbGYgPSB0aGlzOwppbXBvcnQgeyBidXMgfSBmcm9tICIuLi8uLi8uLi9tYWluLmpzIjsKLy9pbXBvcnQgcm91dGVyIGZyb20gIi4uL3JvdXRlciIKZXhwb3J0IGRlZmF1bHQgewogICAgY29tcG9uZW50czoge0Zvcm1BZGRJbnF1ZXJpdG99LAogICAgbW91bnRlZCgpewogICAgYnVzLiRvbigncmVmcmVzaEV2ZW50b3MnLCAoKT0+ewogICAgICAgIHRoaXMucmVnaXN0YXJFdmVudG8gPSBmYWxzZTsKICAgICAgICB0aGlzLnN3aXRjaFRhYmxlKCdUb2RvcycpOwogICAgICAgIHRoaXMudGl0bGUgPSAnRXZlbnRvcyc7CiAgICB9KQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFsbElucXVlcml0b3M6IFtdLAogICAgICB0aXRsZTogIklucXXDqXJpdG9zIiwKICAgICAgY3JpYXJJbnF1ZXJpdG86ZmFsc2UsCiAgICAgIGNyaWFySW5xdWVyaXRvVGV4dCA6ICJDcmlhciBub3ZvIGlucXXDqXJpdG8iCiAgICB9OwogIH0sCiAgYWN0aXZhdGVkKCkgewogICAgYXhpb3MKICAgICAgLmdldCgiYXBpL2dldEFsbElucXVlcml0b3NFdmVudG8iLCB7CiAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlLAogICAgICAgIGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciBgICsgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKSB9CiAgICAgIH0pCiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLmFsbElucXVlcml0b3MgPSByZXNwb25zZS5kYXRhOwogICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkgewogICAgICAgICAgdGhpcy4kdG9hc3RlZC5lcnJvcigiU2Vzc8OjbyBleHBpcm91LiIpOwogICAgICAgICAgYnVzLiRlbWl0KCJsb2dvdXQiKTsKICAgICAgICB9CiAgICAgIH0pCiAgICAgIC5jYXRjaChlcnJvciA9PiB7CgogICAgICB9KTsKICAgIHRoaXMudGl0bGUgPSAiSW5xdcOpcml0b3MiOwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGxpbmsoKXsKICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5ocmVmOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgICB0b2dnbGVDcmlhcklucXVlcml0bygpewogICAgICAgICAgdGhpcy5jcmlhcklucXVlcml0byA9ICF0aGlzLmNyaWFySW5xdWVyaXRvOwogICAgICAgICAgaWYodGhpcy5jcmlhcklucXVlcml0byl7CiAgICAgICAgICAgICAgdGhpcy5jcmlhcklucXVlcml0b1RleHQgPSAiVm9sdGFyIjsKICAgICAgICAgIH1lbHNlIHsKICAgICAgICAgICAgdGhpcy5jcmlhcklucXVlcml0b1RleHQgPSAiQ3JpYXIgbm92byBpbnF1w6lyaXRvIjsKICAgICAgICAgIH0KICAgIH0sCiAgICBsaXN0YXJSZXNwb3N0YXMoaW5xdWVyaXRvKSB7CiAgICAgIGJ1cy4kZW1pdCgibGlzdGFyUmVzcG9zdGFzSW5xdWVyaXRvIiwgaW5xdWVyaXRvKTsKICAgIH0sCiAgICBhbHRlcmFyRXN0YWRvKGlucXVlcml0bykgewogICAgICBheGlvcwogICAgICAgICAgICAgIC5wYXRjaChgYXBpL2VkaXRFc3RhZG9JbnF1ZXJpdG8vJHtpbnF1ZXJpdG8uaWR9LyR7aW5xdWVyaXRvLmlkRXZlbnRvfWAsbnVsbCwgewogICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlLAogICAgICAgICAgICAgICAgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiBgQmVhcmVyIGAgKyBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpIH0KICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgIGlucXVlcml0by5lc3RhZG8gPSAxLWlucXVlcml0by5lc3RhZG87CiAgICAgICAgICAgICAgICBpZiggaW5xdWVyaXRvLmVzdGFkbyA9PT0gMCkgewogICAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdGVkLnNob3coIklucXXDqXJpdG8gZmVjaGFkbyBjb20gc3VjZXNzbyEiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdGVkLnNob3coIklucXXDqXJpdG8gYXRpdmFkbyBjb20gc3VjZXNzbyEiKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZihyZXNwb25zZS5zdGF0dXMgPT0gNDA5KXsKICAgICAgICAgICAgICAgICAgdGhpcy4kdG9hc3RlZC5lcnJvcigiT2NvcnJldSB1bSBlcnJvIik7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgICAgIGlmKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKXsKICAgICAgICAgICAgICAgICAgdGhpcy4kdG9hc3RlZC5lcnJvcigiU2Vzc8OjbyBleHBpcm91LiIpOwogICAgICAgICAgICAgICAgICBidXMuJGVtaXQoImxvZ291dCIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgfSwKICB9Cn07Cg=="},{"version":3,"sources":["InqueritosTablesMenu.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"InqueritosTablesMenu.vue","sourceRoot":"src/components/tablecomponents/inqueritos","sourcesContent":["\n<template>\n  <div class=\"inqueritos\">\n    <br>\n    <h1>{{this.title}}</h1>\n    <br>\n    <div class=\"dados\">\n      <div id=\"fields\" class=\"tabela\">\n        <div class=\"buttonsRegisto\">\n            <div class=\"buttonAdicionarInquerito\">\n                <button v-on:click=\"toggleCriarInquerito()\">\n                    <i class=\"fas fa-plus-circle\"></i> {{this.criarInqueritoText}}\n                </button>\n            </div>\n        </div>\n          <template v-if=\"criarInquerito\">\n              <keep-alive>\n                  <FormAddInquerito/>\n              </keep-alive>\n          </template>\n        \n        <table class=\"w3-table-all\" id=\"tabela\" v-if=\"this.criarInquerito === false\">\n          <tr>\n            <th>ID Inquérito</th>\n            <th>ID Evento</th>\n            <th>Nome Evento</th>\n            <th>Data Evento</th>\n            <th>Link</th>\n            <th>Nº Questões</th>\n            <th>Nº Respostas</th>\n            <th>Estado</th>\n            <!--<th>Dados </th>-->\n          </tr>\n          <!--ID, nome, tipo, data, local -->\n          <tr class=\"conteudo\" v-for=\"(inquerito, id) in allInqueritos\" :key=\"id\">\n            <td class=\"idEvento\">{{ inquerito.id }}</td>\n            <td>{{ inquerito.idEvento }}</td>\n            <td>{{ inquerito.nomeEvento }}</td>\n            <td>{{ inquerito.dataEvento }}</td>\n            <td><a :href=\"link + 'inquerito/' + inquerito.link\" target=\"Inquerito\">Link</a></td>\n            <td>{{ inquerito.nrQuestoes }}</td>\n            <td>{{ inquerito.nrRespostas }}</td>\n            <td>{{inquerito.estado == 1 ? 'Ativo' : 'Fechado'}}</td>\n            <td class=\"buttons\">\n              <div class=\"estadoToggleButton\">\n                <a class=\"fas fa-check\" v-on:click=\"alterarEstado(inquerito)\" title=\"Alterar Estado\"></a>\n              </div>\n              <div class=\"listarRespostasButton\">\n                <a class=\"fas fa-file-alt\" v-on:click=\"listarRespostas(inquerito)\" title=\"Listar Respostas\"></a>\n              </div>\n            </td>\n          </tr>\n        </table>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nimport FormAddInquerito from \"../../registos/FormAddInquerito\";\nvar axios = require(\"axios\");\naxios.interceptors.response.use(\n  response => response,\n  error => {\n      if (error.response.status === 401) { \n        bus.$emit(\"logout\");\n      }\n });\n\nvar self = this;\nimport { bus } from \"../../../main.js\";\n//import router from \"../router\"\nexport default {\n    components: {FormAddInquerito},\n    mounted(){\n    bus.$on('refreshEventos', ()=>{\n        this.registarEvento = false;\n        this.switchTable('Todos');\n        this.title = 'Eventos';\n    })\n  },\n  data() {\n    return {\n      allInqueritos: [],\n      title: \"Inquéritos\",\n      criarInquerito:false,\n      criarInqueritoText : \"Criar novo inquérito\"\n    };\n  },\n  activated() {\n    axios\n      .get(\"api/getAllInqueritosEvento\", {\n        withCredentials: true,\n        headers: { Authorization: `Bearer ` + sessionStorage.getItem(\"token\") }\n      })\n      .then(response => {\n        this.allInqueritos = response.data;\n        if (response.status === 401) {\n          this.$toasted.error(\"Sessão expirou.\");\n          bus.$emit(\"logout\");\n        }\n      })\n      .catch(error => {\n\n      });\n    this.title = \"Inquéritos\";\n  },\n  computed: {\n    link(){\n      return window.location.href;\n    }\n  },\n  methods: {\n      toggleCriarInquerito(){\n          this.criarInquerito = !this.criarInquerito;\n          if(this.criarInquerito){\n              this.criarInqueritoText = \"Voltar\";\n          }else {\n            this.criarInqueritoText = \"Criar novo inquérito\";\n          }\n    },\n    listarRespostas(inquerito) {\n      bus.$emit(\"listarRespostasInquerito\", inquerito);\n    },\n    alterarEstado(inquerito) {\n      axios\n              .patch(`api/editEstadoInquerito/${inquerito.id}/${inquerito.idEvento}`,null, {\n                withCredentials: true,\n                headers: { Authorization: `Bearer ` + sessionStorage.getItem(\"token\") }\n              })\n              .then(response => {\n                inquerito.estado = 1-inquerito.estado;\n                if( inquerito.estado === 0) {\n                  this.$toasted.show(\"Inquérito fechado com sucesso!\");\n                }\n                else {\n                  this.$toasted.show(\"Inquérito ativado com sucesso!\");\n                }\n\n                if(response.status == 409){\n                  this.$toasted.error(\"Ocorreu um erro\");\n                }\n\n              })\n              .catch(error => {\n                if(error.response.status === 401){\n                  this.$toasted.error(\"Sessão expirou.\");\n                  bus.$emit(\"logout\");\n                }\n              });\n    },\n  }\n};\n</script>\n\n<style>\n@import url(\"https://fonts.googleapis.com/css?family=Open+Sans\");\n@import url(\"https://www.w3schools.com/w3css/4/w3.css\");\n\n.inqueritos h1 {\n  text-align: center;\n}\n\n.inqueritos {\n  font-family: \"Open Sans\";\n}\n\n\n.inqueritos .tabela {\n  width: 100%;\n  margin-bottom: 20px;\n}\n\n.inqueritos #tabela{\n  width: 80%;\n  margin: auto;\n}\n.inqueritos .dados .idEvento {\n  width: 5%;\n}\n.inqueritos .tabela table td {\n  border: 1px solid #ccc;\n}\n\n.inqueritos .dados table td {\n  width: 15%;\n}\n\n.inqueritos .tabela table th {\n  border: 1px solid #ccc;\n}\n.inqueritos .tabela .conteudo:hover {\n  font-weight: bold;\n  background-color: #e2e2e2;\n}\n\n.inqueritos .dados {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.inqueritos .verButton {\n  cursor: pointer;\n}\n.inqueritos .verButton a:hover {\n  font-weight: bold;\n}\n\n.inqueritos .editarButton {\n  cursor: pointer;\n}\n\n.inqueritos .editarButton a:hover {\n  font-weight: bold;\n  font-size: 13px;\n\n}\n\n.inqueritos .estadoToggleButton {\n  cursor: pointer;\n}\n\n.inqueritos .estadoToggleButton a:hover {\n  font-weight: bold;\n  font-size: 13px;\n\n}\n\n.inqueritos .estadoToggleButton {\n  cursor: pointer;\n}\n\n.inqueritos .estadoToggleButton a:hover {\n  font-weight: bold;\n  font-size: 13px;\n\n}\n\n.inqueritos .listarRespostasButton {\n  cursor: pointer;\n}\n\n.inqueritos .listarRespostasButton a:hover {\n  font-weight: bold;\n  font-size: 13px;\n\n}\n\n.inqueritos .dados .buttons {\n  border-color: white;\n  background-color: white;\n  border-top: none;\n}\n\n\n.inqueritos .buttonAdicionarInquerito {\n  margin-bottom: 5px;\n\n}\n\n.inqueritos .buttonsRegisto{\n  margin-bottom: 5px;\n  display: -webkit-box;\n  margin-left:10%;\n}\n\n.inqueritos .buttonsRegisto button {\n  text-align: center;\n  cursor: pointer;\n  background-color: rgba(246, 136, 72, 0.91);\n  border: none;\n  border-radius: 4px;\n}\n\n.inqueritos .buttonAdicionarInquerito button:hover {\n  background-color: rgba(217, 107, 44, 0.91);\n}\n</style>"]}]}