{"remainingRequest":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Projeto Final\\Entrega\\Software\\Frontend\\src\\components\\registos\\FormAddInquerito.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\src\\components\\registos\\FormAddInquerito.vue","mtime":1617391304462},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7YnVzfSBmcm9tICIuLi8uLi9tYWluLmpzIjsKLyogZXNsaW50LWRpc2FibGUgKi8KdmFyIGF4aW9zID0gcmVxdWlyZSgiYXhpb3MiKTsKYXhpb3MuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZSgKICAgIHJlc3BvbnNlID0+IHJlc3BvbnNlLAogICAgZXJyb3IgPT4gewogICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMSkgewogICAgICAgICAgICBidXMuJGVtaXQoImxvZ291dCIpOwogICAgICAgIH0KICAgIH0pOwp2YXIgaW5zdGFuY2UgPSBheGlvcy5jcmVhdGUoewogICAgdmFsaWRhdGVTdGF0dXM6IGZ1bmN0aW9uIChzdGF0dXMpIHsKICAgICAgICByZXR1cm4gc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDA7CiAgICB9Cn0pOwoKZXhwb3J0IGRlZmF1bHQgewogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBpZFF1ZXN0YW86IDAsCiAgICAgICAgICAgIGNvdW50ZXI6IDAsCiAgICAgICAgICAgIHF1ZXN0YW86IHsKICAgICAgICAgICAgICAgIGlkOiAnJywKICAgICAgICAgICAgICAgIHF1ZXN0YW86ICcnLAogICAgICAgICAgICAgICAgdGlwb1ZhcjogJycsCiAgICAgICAgICAgICAgICBpbnRlcnZhbG86IFsiIl0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgcXVlc3RvZXM6IFtdCiAgICAgICAgfQoKICAgIH0sIG1ldGhvZHM6IHsKICAgICAgICBkZWxldGVPcGNhbyhjb3VudGVyKSB7CgogICAgICAgICAgICB0aGlzLnF1ZXN0b2VzLnNwbGljZShjb3VudGVyLCAxKTsKICAgICAgICB9LAogICAgICAgIGNvbnN0cm9pSW50ZXJ2YWxvKGFycmF5KSB7CiAgICAgICAgICAgIHZhciBzdHJpbmcgPSAnJzsKICAgICAgICAgICAgYXJyYXkuZm9yRWFjaChlbGVtZW50ID0+IHsKICAgICAgICAgICAgICAgIHN0cmluZyArPSAiICIgKyBlbGVtZW50ICsgIiwiOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgbGV0IHN0ciA9IHN0cmluZy5zbGljZSgwLCAtMSk7CiAgICAgICAgICAgIHJldHVybiBzdHI7CiAgICAgICAgfSwKICAgICAgICBhZGljaW9uYXJWYWxvcigpIHsKICAgICAgICAgICAgdGhpcy5xdWVzdGFvLmludGVydmFsby5wdXNoKCcnKQogICAgICAgIH0sCiAgICAgICAgZGVsZXRlVmFsb3IoaW50ZXJ2YWxvLCBjb3VudGVyKSB7CiAgICAgICAgICAgIGlmKGludGVydmFsby5sZW5ndGggPT09IDEpewogICAgICAgICAgICAgICAgdGhpcy4kdG9hc3RlZC5lcnJvcigiTcOtbmltbyBkZSB1bWEgb3DDp8OjbyEiKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpbnRlcnZhbG8uc3BsaWNlKGNvdW50ZXIsIDEpOwogICAgICAgIH0sCiAgICAgICAgYWRpY2lvbmFyUXVlc3RhbyhxdWVzdGFvKSB7CiAgICAgICAgICAgIGlmIChxdWVzdGFvLnF1ZXN0YW8gPT09ICcnIHx8IHF1ZXN0YW8udGlwb1ZhciA9PT0gJycgfHwgKHF1ZXN0YW8udGlwb1ZhciA9PSAnaW50ZXJ2YWxvJyAmJiBxdWVzdGFvLmludGVydmFsby5sZW5ndGggPT0gMCkpIHsKICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuZXJyb3IoIkNhbXBvcyBvYnJpZ2F0w7NyaW9zIHZhemlvcyEiKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy5xdWVzdG9lcy5wdXNoKHsKICAgICAgICAgICAgICAgIHF1ZXN0YW86IHF1ZXN0YW8ucXVlc3RhbywKICAgICAgICAgICAgICAgIHRpcG9WYXI6IHF1ZXN0YW8udGlwb1ZhciwKICAgICAgICAgICAgICAgIGludGVydmFsbzogcXVlc3Rhby5pbnRlcnZhbG8KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMucXVlc3RhbyA9IHsKICAgICAgICAgICAgICAgIHF1ZXN0YW86ICcnLAogICAgICAgICAgICAgICAgdGlwb1ZhcjogJycsCiAgICAgICAgICAgICAgICBpbnRlcnZhbG86IFtdCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuc2hvdygiUXVlc3TDo28gYWRpY2lvbmFkYSEiKTsKICAgICAgICB9LAogICAgICAgIGRlbGV0ZUNhbXBvKGNvdW50ZXIpIHsKICAgICAgICAgICAgdGhpcy5xdWVzdGFvLmludGVydmFsby5zcGxpY2UoY291bnRlciwgMSk7CiAgICAgICAgfSwKICAgICAgICBzdWJtaXQoKSB7CiAgICAgICAgICAgIGlmKHRoaXMucXVlc3RvZXMubGVuZ3RoIDw9IDApewogICAgICAgICAgICAgICAgdGhpcy4kdG9hc3RlZC5lcnJvcigiTcOtbmltbyAxIFF1ZXN0w6NvIHBvciBJbnF1w6lyaXRvISIpCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCBxdWVzdG9lcyA9ICd7IFxuICJxdWVzdG9lcyI6JyArIEpTT04uc3RyaW5naWZ5KHRoaXMucXVlc3RvZXMpICsgIlxuIH0iOwogICAgICAgICAgICBsZXQgbXNnID0gSlNPTi5wYXJzZShxdWVzdG9lcyk7CiAgICAgICAgICAgIGluc3RhbmNlLnBvc3QoJ2FwaS9wb3N0SW5xdWVyaXRvJywKICAgICAgICAgICAgICAgIG1zZywgewogICAgICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgYCArIHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInRva2VuIikKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXN0b2VzID0gW107CgogICAgICAgICAgICAgICAgdGhpcy4kdG9hc3RlZC5zaG93KCJJbnF1w6lyaXRvIENyaWFkbyEiKQogICAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAgIH0pCgogICAgICAgIH0KCgogICAgfQp9Cg=="},{"version":3,"sources":["FormAddInquerito.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA","file":"FormAddInquerito.vue","sourceRoot":"src/components/registos","sourcesContent":["<template>\n    <div>\n        <div class=\"registarInquerito\">\n            <div class=\"fields\">\n                <div class=\"titulo\">\n                    <h3>Questões</h3>\n                </div>\n\n                <div class=\"campos\">\n                    <div class=\"questao\">\n                        <div class=\"valorQuestao\">\n                            <label for=\"questao\">Questão: <i class=\"obrigatorio\"></i></label>\n                            <input id=\"questao\" type=\"text\" v-model.lazy=\"questao.questao\" required>\n                        </div>\n                        <div class=\"tipoQuestao\">\n                            <label>Tipo de Questao:<i class=\"obrigatorio\"></i></label>\n                            <select v-model=\"questao.tipoVar\">\n                                <option value=\"string\">Texto</option>\n                                <option value=\"long\">Número</option>\n                                <option value=\"intervalo\">Várias Opções</option>\n                            </select>\n                            <div class=\"intervalo\" v-if=\"questao.tipoVar=='intervalo'\">\n                                <h5><b>Adicionar Valor</b></h5>\n                                <div v-for=\"(valor,counter) in questao.intervalo\"\n                                     v-bind:key=\"counter\">\n                                    <label for=\"valor\">{{counter + 1}}º Opção: <i class=\"obrigatorio\"></i></label>\n                                    <input id=\"valor\" type=\"text\" v-model.lazy=\"questao.intervalo[counter]\" required>\n                                </div>\n                                <div class=\"buttonsIntervalos\">\n                                    <div class=\"buttonAdicionarValor\">\n                                        <button class=\"fa fa-plus\" @click=\"adicionarValor()\"></button>\n                                    </div>\n                                    <div class=\"buttonEliminarValor\">\n                                        <button class=\"fa fa-trash\"\n                                                @click=\"deleteValor(questao.intervalo,counter)\"></button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"buttonAdicionarQuestao\">\n                            <button @click=\"adicionarQuestao(questao)\"><i class=\"fa fa-plus\"/>Adicionar Questão</button>\n                        </div>\n                    </div>\n                </div>\n                <h3>Questões Adicionadas</h3>\n                <table class=\"w3-table-all\" id=\"tabela\">\n                    <tr>\n                        <th>ID Questão</th>\n                        <td>Questao</td>\n                        <th>Tipo Questão</th>\n                        <th>Valores Possíveis</th>\n                    </tr>\n                    <tr class=\"conteudo\" v-for=\"(questaoTabela, tableKey) in questoes\" :key=\"tableKey\">\n                        <td>{{tableKey+1}}</td>\n                        <td>{{questaoTabela.questao}}</td>\n                        <td v-if=\"questaoTabela.tipoVar=='string'\">Texto</td>\n                        <td v-if=\"questaoTabela.tipoVar=='intervalo'\">Escolha Múltipla</td>\n                        <td v-if=\"questaoTabela.tipoVar=='long'\">Número</td>\n                        <td v-if=\"questaoTabela.tipoVar=='intervalo'\">{{constroiIntervalo(questaoTabela.intervalo)}}\n                        </td>\n                        <td v-else>NA</td>\n                        <td class=\"buttonsRemover\">\n                            <a class=\"fas fa-trash\" v-on:click=\"deleteOpcao(tableKey)\" title=\"Remover \"></a>\n                        </td>\n                    </tr>\n                </table>\n                <div class=\"registar\">\n                    <button type=\"submit\" v-on:click.prevent=\"submit()\"><i class=\"far fa-save\"></i> Criar Inquérito</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    import {bus} from \"../../main.js\";\n    /* eslint-disable */\n    var axios = require(\"axios\");\n    axios.interceptors.response.use(\n        response => response,\n        error => {\n            if (error.response.status === 401) {\n                bus.$emit(\"logout\");\n            }\n        });\n    var instance = axios.create({\n        validateStatus: function (status) {\n            return status >= 200 && status < 300;\n        }\n    });\n\n    export default {\n        data() {\n            return {\n                idQuestao: 0,\n                counter: 0,\n                questao: {\n                    id: '',\n                    questao: '',\n                    tipoVar: '',\n                    intervalo: [\"\"]\n                },\n                questoes: []\n            }\n\n        }, methods: {\n            deleteOpcao(counter) {\n\n                this.questoes.splice(counter, 1);\n            },\n            constroiIntervalo(array) {\n                var string = '';\n                array.forEach(element => {\n                    string += \" \" + element + \",\";\n                });\n                let str = string.slice(0, -1);\n                return str;\n            },\n            adicionarValor() {\n                this.questao.intervalo.push('')\n            },\n            deleteValor(intervalo, counter) {\n                if(intervalo.length === 1){\n                    this.$toasted.error(\"Mínimo de uma opção!\");\n                    return;\n                }\n                intervalo.splice(counter, 1);\n            },\n            adicionarQuestao(questao) {\n                if (questao.questao === '' || questao.tipoVar === '' || (questao.tipoVar == 'intervalo' && questao.intervalo.length == 0)) {\n                    this.$toasted.error(\"Campos obrigatórios vazios!\");\n                    return;\n                }\n\n                this.questoes.push({\n                    questao: questao.questao,\n                    tipoVar: questao.tipoVar,\n                    intervalo: questao.intervalo\n                });\n                this.questao = {\n                    questao: '',\n                    tipoVar: '',\n                    intervalo: []\n                };\n                this.$toasted.show(\"Questão adicionada!\");\n            },\n            deleteCampo(counter) {\n                this.questao.intervalo.splice(counter, 1);\n            },\n            submit() {\n                if(this.questoes.length <= 0){\n                    this.$toasted.error(\"Mínimo 1 Questão por Inquérito!\")\n                    return;\n                }\n\n                let questoes = '{ \\n \"questoes\":' + JSON.stringify(this.questoes) + \"\\n }\";\n                let msg = JSON.parse(questoes);\n                instance.post('api/postInquerito',\n                    msg, {\n                        withCredentials: true,\n                        headers: {\n                            Authorization: `Bearer ` + sessionStorage.getItem(\"token\")\n                        }\n                    }).then(() => {\n                        this.questoes = [];\n\n                    this.$toasted.show(\"Inquérito Criado!\")\n                }).catch(error => {\n                })\n\n            }\n\n\n        }\n    }\n</script>\n<style>\n\n    .registarInquerito {\n        font-family: \"Open Sans\";\n        display: flex;\n\n\n    }\n    .registarInquerito .titulo {\n       margin-left:16.4%;\n    }\n    .registarInquerito .titulo h3 {\n       text-align: left;\n    }\n\n    .registarInquerito table {\n        margin-bottom:20px;\n    }\n    .registarInquerito .fields {\n        display: inline-grid;\n        grid-row-gap: 10px;\n        grid-column-gap: 50px;\n        background-color: oldlace;\n        width: 100%;\n        height: 100%;\n\n    }\n\n    .registarInquerito .campos {\n        grid-column-start: 1;\n        margin-top: 10px;\n        margin-left: 10%;\n        margin-bottom: 10px;\n    }\n\n    .registarInquerito .valorQuestao {\n        height: 10%;\n        margin-bottom: 10px;\n    }\n\n    .registarInquerito .valorQuestao input {\n        margin-left: 4%;\n    }\n\n\n    .registarInquerito .tipoQuestao {\n        height: 10%;\n        margin-bottom: 10px;\n    }\n\n    .registarInquerito .tipoQuestao select {\n        margin-left: 1%;\n        width: 8.5%;\n    }\n\n    .registarInquerito .buttonAdicionarQuestao {\n        margin-left: 7%;\n    }\n\n    .registarInquerito .buttonAdicionarQuestao button {\n        text-align: center;\n        cursor: pointer;\n        background-color: rgba(246, 136, 72, 0.91);\n        border: none;\n        border-radius: 4px;\n    }\n\n    .registarInquerito .buttonAdicionarQuestao button:hover {\n        background-color: rgba(217, 107, 44, 0.91);\n    }\n\n    .registarInquerito .intervalo {\n        margin-top: 30px;\n    }\n\n    .registarInquerito input {\n        margin-left: 3.8%;\n    }\n\n    .registarInquerito .conteudo .buttonsRemover {\n        cursor: pointer;\n        background-color:oldlace;\n        width: 2%;\n        border-top:none;\n        border-color: oldlace;\n    }\n\n    .registarInquerito .conteudo .buttonsRemover a:hover {\n        font-weight: bold;\n        font-size: 13px;\n    }\n\n    .registarInquerito .buttonsIntervalos{\n        width:3%;\n        margin-left:8%;\n        margin-bottom:50px;\n        margin-top:10px;\n        height:10%;\n    }\n\n    .registarInquerito .buttonsIntervalos button{\n        background-color: lightgreen;\n        text-align: center;\n        cursor: pointer;\n        border: none;\n        border-radius: 4px;\n        padding: 4px;\n\n    }\n\n    .registarInquerito .buttonsIntervalos button:hover{\n        background-color: green;\n    }\n\n    .registarInquerito .buttonsIntervalos .buttonAdicionarValor{\n        float:left;\n    }\n\n    .registarInquerito .buttonsIntervalos .buttonEliminarValor{\n        float:right;\n    }\n\n    .registarInquerito .registar {\n        margin-top:30px;\n        margin-left:50%;\n        margin-bottom:30px;\n    }\n\n    .registarInquerito .registar button {\n        height: 50px;\n        font-size: medium;\n        cursor: pointer;\n        border: none;\n        background-color: #e99d72;\n        border-radius: 6px;\n        padding-left: 15px;\n        padding-right: 15px;\n\n    }\n    .registarInquerito .registar button:hover {\n        background-color: #fab995;\n    }\n\n\n</style>"]}]}