{"remainingRequest":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Projeto Final\\Entrega\\Software\\Frontend\\src\\components\\registos\\RegistoCriacaoInscricaoEvento.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\src\\components\\registos\\RegistoCriacaoInscricaoEvento.vue","mtime":1617391304798},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8qIGVzbGludC1kaXNhYmxlICovCnZhciBheGlvcyA9IHJlcXVpcmUoImF4aW9zIik7CmF4aW9zLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoCiAgcmVzcG9uc2UgPT4gcmVzcG9uc2UsCiAgZXJyb3IgPT4gewogICAgICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHsgCiAgICAgICAgYnVzLiRlbWl0KCJsb2dvdXQiKTsKICAgICAgfQogfSk7CmltcG9ydCB7IGJ1cyB9IGZyb20gIi4uLy4uL21haW4uanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgICBkYXRhKCkgewogICAgdmFyIGhlcmUgPSB0aGlzOwogICAgcmV0dXJuIHsKICAgICAgICBpbnB1dDogewogICAgICAgICAgICBldmVudG8gOiBudWxsCiAgICAgICAgfSwKICAgICAgICBldmVudG9UZXh0OiAiUHJvY3VyYXIgcG9yIG5vbWUsIGRhdGEgb3UgbG9jYWwiLAogICAgICAgIGFsbEV2ZW50b3MgOiBbXSwKICAgICAgICBsaW5rSW5zY3JpY2FvIDoiIgogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAgbGluaygpewogICAgICByZXR1cm4gd2luZG93LmxvY2F0aW9uLmhyZWY7CiAgICB9CiAgfSwKICBhY3RpdmF0ZWQoKSB7CiAgICBheGlvcwogICAgICAuZ2V0KCJhcGkvZ2V0QWxsRXZlbnRvc0lkTm9tZSIsIHsKICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUsCiAgICAgICAgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiBgQmVhcmVyIGAgKyBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpIH0KICAgICAgfSkKICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMuYWxsRXZlbnRvcyA9IHJlc3BvbnNlLmRhdGEKICAgICAgICBpZiAoZXJyb3JzLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgICAgICB0aGlzLiR0b2FzdGVkLmVycm9yKCJTZXNzw6NvIGV4cGlyb3UuIik7CiAgICAgICAgICBidXMuJGVtaXQoImxvZ291dCIpOwogICAgICAgIH0KICAgICAgfSkKICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgaWYoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpewogICAgICAgICAgICB0aGlzLiR0b2FzdGVkLmVycm9yKCJTZXNzw6NvIGV4cGlyb3UuIik7CiAgICAgICAgICAgIGJ1cy4kZW1pdCgibG9nb3V0Iik7CiAgICAgICAgICAgIH0KICAgICAgfSk7CiAgCiAgfSwKCiAgbWV0aG9kczogewogICAgY2xlYXJGaWVsZHM6IGZ1bmN0aW9uKCkgewogICAgICBidXMuJGVtaXQoJ3JlZnJlc2hFdmVudG9zJyk7CiAgICAgCiAgICB9LAogICAgc3VibWl0OiBmdW5jdGlvbigpIHsKICAgICAgaWYodGhpcy5pbnB1dC5ldmVudG8gPT0gbnVsbCl7CiAgICAgICAgIHRoaXMuJHRvYXN0ZWQuZXJyb3IoJ1NlbGVjaW9uZSB1bSBldmVudG8hJyk7CiAgICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYodGhpcy5pbnB1dC5ldmVudG8udG9rZW5SZWdpc3RvICE9ICIiKXsKICAgICAgICB0aGlzLiR0b2FzdGVkLmVycm9yKCdFdmVudG8gasOhIHBvc3N1aSBsaW5rIHBhcmEgaW5zY3Jpw6fDo28hJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIAogICAgICBheGlvcwogICAgICAuZ2V0KGBhcGkvZ2V0TGlua1JlZ2lzdG9FdmVudG8vJHt0aGlzLmlucHV0LmV2ZW50by5pZH1gLCB7CiAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlLAogICAgICAgIGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciBgICsgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKSB9CiAgICAgIH0pCiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLmxpbmtJbnNjcmljYW8gPSB0aGlzLmxpbmsgKyAgImluc2NyaWNhb0V2ZW50by8iICsgcmVzcG9uc2UuZGF0YTsKICAgICAgICB0aGlzLmlucHV0LmV2ZW50by50b2tlblJlZ2lzdG8gPSByZXNwb25zZS5kYXRhOwogICAgICAgIGJ1cy4kZW1pdCgncmVmcmVzaEV2ZW50b3MnKTsKCiAgICAgICAgaWYgKGVycm9ycy5yZXNwb25zZS5zdGF0dXMgPT09IDQwMSkgewogICAgICAgICAgdGhpcy4kdG9hc3RlZC5lcnJvcigiU2Vzc8OjbyBleHBpcm91LiIpOwogICAgICAgICAgYnVzLiRlbWl0KCJsb2dvdXQiKTsKICAgICAgICB9CgoKICAgICAgICB0aGlzLiR0b2FzdGVkLnNob3coIkxpbmsgY3JpYWRvIGNvbSBzdWNlc3NvISIpCiAgICAgIH0pCiAgICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgIGlmKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKXsKICAgICAgICAgICAgdGhpcy4kdG9hc3RlZC5lcnJvcigiU2Vzc8OjbyBleHBpcm91LiIpOwogICAgICAgICAgICBidXMuJGVtaXQoImxvZ291dCIpOwogICAgICAgICAgICB9CiAgICAgIH0pOwoKCgogICAgfQogIH0sCn0K"},{"version":3,"sources":["RegistoCriacaoInscricaoEvento.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA","file":"RegistoCriacaoInscricaoEvento.vue","sourceRoot":"src/components/registos","sourcesContent":["<template>\n    <div>\n        <div class=\"registarCriacaoinscricaoEvento\">\n            <div id=\"fields\" class=\"fields\">\n                <div class=\"evento\">\n                    <label>Evento:* <i class=\"obrigatorio\"></i></label>\n                    <div class=\"autocomplete\">          \n                        <vue-single-select \n                            v-model=\"input.evento\"\n                            :options=\"allEventos\"\n                            v-bind:placeholder= \"eventoText\"\n                            option-label=\"nome\"\n                        ></vue-single-select>  \n                    </div>\n                </div>\n                <div class=\"linkEvento\">\n                   <label>Link para Inscrição:* <i class=\"obrigatorio\"></i></label>\n                   <a v-bind:href=\"linkInscricao\">{{linkInscricao}}</a>\n                </div>\n\n                 <div class=\"registar\">\n                    <button type=\"submit\" v-on:click.prevent=\"submit()\"><i class=\"far fa-save\"></i> Criar Link</button>\n                  </div>\n            </div>\n           \n        </div>\n    </div>\n</template>\n\n<script>\n/* eslint-disable */\nvar axios = require(\"axios\");\naxios.interceptors.response.use(\n  response => response,\n  error => {\n      if (error.response.status === 401) { \n        bus.$emit(\"logout\");\n      }\n });\nimport { bus } from \"../../main.js\";\nexport default {\n    data() {\n    var here = this;\n    return {\n        input: {\n            evento : null\n        },\n        eventoText: \"Procurar por nome, data ou local\",\n        allEventos : [],\n        linkInscricao :\"\"\n    };\n  },\n  computed: {\n     link(){\n      return window.location.href;\n    }\n  },\n  activated() {\n    axios\n      .get(\"api/getAllEventosIdNome\", {\n        withCredentials: true,\n        headers: { Authorization: `Bearer ` + sessionStorage.getItem(\"token\") }\n      })\n      .then(response => {\n        this.allEventos = response.data\n        if (errors.response.status === 401) {\n          this.$toasted.error(\"Sessão expirou.\");\n          bus.$emit(\"logout\");\n        }\n      })\n      .catch(error => {\n         if(error.response.status === 401){\n            this.$toasted.error(\"Sessão expirou.\");\n            bus.$emit(\"logout\");\n            }\n      });\n  \n  },\n\n  methods: {\n    clearFields: function() {\n      bus.$emit('refreshEventos');\n     \n    },\n    submit: function() {\n      if(this.input.evento == null){\n         this.$toasted.error('Selecione um evento!');\n         return;\n      }\n\n      if(this.input.evento.tokenRegisto != \"\"){\n        this.$toasted.error('Evento já possui link para inscrição!');\n        return;\n      }\n      \n      axios\n      .get(`api/getLinkRegistoEvento/${this.input.evento.id}`, {\n        withCredentials: true,\n        headers: { Authorization: `Bearer ` + sessionStorage.getItem(\"token\") }\n      })\n      .then(response => {\n        this.linkInscricao = this.link +  \"inscricaoEvento/\" + response.data;\n        this.input.evento.tokenRegisto = response.data;\n        bus.$emit('refreshEventos');\n\n        if (errors.response.status === 401) {\n          this.$toasted.error(\"Sessão expirou.\");\n          bus.$emit(\"logout\");\n        }\n\n\n        this.$toasted.show(\"Link criado com sucesso!\")\n      })\n      .catch(error => {\n         if(error.response.status === 401){\n            this.$toasted.error(\"Sessão expirou.\");\n            bus.$emit(\"logout\");\n            }\n      });\n\n\n\n    }\n  },\n}\n</script>\n\n<style>\n@import url(\"https://fonts.googleapis.com/css?family=Open+Sans\");\n@import url(\"https://www.w3schools.com/w3css/4/w3.css\");\n@import url(\"https://use.fontawesome.com/releases/v5.7.0/css/all.css\");\n\n\n.registarCriacaoinscricaoEvento {\n  font-family: \"Open Sans\";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.registarCriacaoinscricaoEvento .fields .obrigatorio{\n  color: red;\n}\n\n.registarCriacaoinscricaoEvento .fields {\n  display: inline-grid;\n  grid-row-gap: 10px;\n  grid-column-gap: 50px;\n  background-color: oldlace;\n  width: 100%;\n  height: 80%;\n  margin-bottom: 20px;\n}\n.registarCriacaoinscricaoEvento .evento {\n  grid-column-start: 1;\n  margin-top: 10px;\n  margin-left: 15%;\n}\n\n\n.registarCriacaoinscricaoEvento .evento .autocomplete{\n   display:inline-block;\n   width: 30%;\n   margin-left:7%;\n}\n\n.registarCriacaoinscricaoEvento .linkEvento {\n  grid-column-start: 1;\n  margin-top: 10px;\n  margin-left: 15%;\n}\n\n\n.registarCriacaoinscricaoEvento .linkEvento a{\n   display:inline-block;\n   width: 30%;\n   margin-left:1%;\n}\n\n.registarCriacaoinscricaoEvento .registar {\n  margin-top: 30px;\n  margin-left: 30%;\n}\n\n.registarCriacaoinscricaoEvento .registar button {\n  height: 50px;\n  font-size: medium;\n  cursor: pointer;\n  border: none;\n  background-color: #e99d72;\n  border-radius: 6px;\n  padding-left: 15px;\n  padding-right: 15px;\n  margin: auto;\n}\n.registarCriacaoinscricaoEvento .registar button:hover {\n  background-color: #fab995;\n}\n\n</style>"]}]}