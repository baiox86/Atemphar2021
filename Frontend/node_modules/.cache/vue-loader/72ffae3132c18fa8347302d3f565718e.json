{"remainingRequest":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Projeto Final\\Entrega\\Software\\Frontend\\src\\components\\registos\\FormInscricoesEvento.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\src\\components\\registos\\FormInscricoesEvento.vue","mtime":1617391304544},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCnZhciBheGlvcyA9IHJlcXVpcmUoImF4aW9zIik7CmF4aW9zLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoCiAgICByZXNwb25zZSA9PiByZXNwb25zZSwKICAgIGVycm9yID0+IHsKICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHsKICAgICAgICAgICAgYnVzLiRlbWl0KCJsb2dvdXQiKTsKICAgICAgICB9CiAgICB9KTsKaW1wb3J0IHtidXN9IGZyb20gIi4uLy4uL21haW4uanMiOwoKZXhwb3J0IGRlZmF1bHQgewogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBhbGxJbnNjcmljb2VzOiBudWxsLAogICAgICAgICAgICByZWdpc3RhclBhZ2FtZW50bzogZmFsc2UsCiAgICAgICAgICAgIHJlZ2lzdGFyQ29tcGFyZWNpbWVudG9Ub2Rvc1RleHQ6ICJBbHRlcmFyIENvbXBhcsOqbmNpYXMgZG8gRXZlbnRvIgogICAgICAgIH07CiAgICB9LAogICAgcHJvcHM6IHsKICAgICAgICBkYWRvc0V2ZW50bzogewogICAgICAgICAgICB0eXBlOiBPYmplY3QsCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgfQogICAgfSwKICAgIGFjdGl2YXRlZCgpIHsKICAgICAgICBheGlvcwogICAgICAgICAgICAuZ2V0KGBhcGkvZ2V0SW5zY3JpY29lc1BhZ2FtZW50b0V2ZW50by8ke3RoaXMuZGFkb3NFdmVudG8uaWRFdmVudG99YCwgewogICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlLAogICAgICAgICAgICAgICAgaGVhZGVyczoge0F1dGhvcml6YXRpb246IGBCZWFyZXIgYCArIHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInRva2VuIil9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuYWxsSW5zY3JpY29lcyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdGVkLmVycm9yKCJTZXNzw6NvIGV4cGlyb3UuIik7CiAgICAgICAgICAgICAgICAgICAgYnVzLiRlbWl0KCJsb2dvdXQiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIHN3aXRjaENvbXBvbmVudChjb21wKSB7CiAgICAgICAgICAgIGJ1cy4kZW1pdCgic3dpdGNoQ29tcCIsIGNvbXApOwogICAgICAgIH0sCiAgICAgICAgZWRpdGFyKGRhdGEpIHsKICAgICAgICAgICAgYnVzLiRlbWl0KCJyZWdpc3RhclBhZ2FtZW50b0luc2NyaWNhbyIsIGRhdGEpOwogICAgICAgIH0sCiAgICAgICAgcmVnaXN0YXJDb21wYXJlY2ltZW50byhpbnNjcmljYW8pIHsKICAgICAgICAgICAgYXhpb3MKICAgICAgICAgICAgICAgIC5wYXRjaChgYXBpL3BhdGNoQ29tcGFyZWNpbWVudG9JbnNjcmljYW8vJHt0aGlzLmRhZG9zRXZlbnRvLmlkRXZlbnRvfS8ke2luc2NyaWNhby5pZFBhcnRpY2lwYW50ZX1gLCBudWxsLCB7CiAgICAgICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtBdXRob3JpemF0aW9uOiBgQmVhcmVyIGAgKyBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgICAgICBpbnNjcmljYW8uZmxhZ0NvbXBhcmVjZXUgPSAhaW5zY3JpY2FvLmZsYWdDb21wYXJlY2V1OwogICAgICAgICAgICAgICAgICAgIGlmIChpbnNjcmljYW8uZmxhZ0NvbXBhcmVjZXUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kdG9hc3RlZC5zaG93KCJDb21wYXJlY2ltZW50byByZWdpc3RhZG8gY29tIHN1Y2Vzc28hIik7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kdG9hc3RlZC5zaG93KCJGYWx0YSBkZSBjb21wYXLDqm5jaWEgcmVnaXN0YWRhIGNvbSBzdWNlc3NvISIpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSA0MDkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kdG9hc3RlZC5lcnJvcigiT2NvcnJldSB1bSBlcnJvIik7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdGVkLmVycm9yKCJTZXNzw6NvIGV4cGlyb3UuIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGJ1cy4kZW1pdCgibG9nb3V0Iik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICByZWdpc3RhckNvbXBhcmVjaW1lbnRvVG9kb3MoKSB7CiAgICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgICAgICAucGF0Y2goYGFwaS9wYXRjaENvbXBhcmVjaW1lbnRvSW5zY3JpY2FvLyR7dGhpcy5kYWRvc0V2ZW50by5pZEV2ZW50b31gLCBudWxsLCB7CiAgICAgICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtBdXRob3JpemF0aW9uOiBgQmVhcmVyIGAgKyBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbEluc2NyaWNvZXMuZm9yRWFjaChmdW5jdGlvbiAocGFydCwgaW5kZXgsIHRoZUFycmF5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoZUFycmF5W2luZGV4XS5mbGFnQ29tcGFyZWNldSA9ICF0aGVBcnJheVtpbmRleF0uZmxhZ0NvbXBhcmVjZXU7CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuc2hvdygiQ29tcGFyw6puY2lhcyBhbHRlcmFkYXMgY29tIHN1Y2Vzc28hIik7CgoKICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDQwOSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdGVkLmVycm9yKCJPY29ycmV1IHVtIGVycm8iKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kdG9hc3RlZC5lcnJvcigiU2Vzc8OjbyBleHBpcm91LiIpOwogICAgICAgICAgICAgICAgICAgICAgICBidXMuJGVtaXQoImxvZ291dCIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICB9Cn0K"},{"version":3,"sources":["FormInscricoesEvento.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"FormInscricoesEvento.vue","sourceRoot":"src/components/registos","sourcesContent":["<template>\n    <div>\n        <br>\n        <div class=\"voltarEvento\">\n            <button v-on:click=\"switchComponent('EventsTablesMenu')\">\n                <i class=\"fas fa-reply\"></i>Voltar\n            </button>\n        </div>\n        <div class=\"inscricoes\">\n            <div v-if=\"this.allInscricoes.length > 0\">\n                <h1>Inscrições no Evento </h1>\n                <div class=\"buttonRegistarComparecimentoTodos\">\n                    <button v-on:click=\"registarComparecimentoTodos()()\">\n                        <i class=\"fas fa-plus-circle\"></i> {{this.registarComparecimentoTodosText}}\n                    </button>\n                </div>\n                <div class=\"dados\">\n                    <table class=\"w3-table-all\" id=\"tabela\">\n                        <tr>\n                            <th>Nome</th>\n                            <th>Email</th>\n                            <th>Primeiro Evento</th>\n                            <th>Compareceu</th>\n                            <th>Pagamento Necessário</th>\n                            <th>Valor (€)</th>\n                            <th>Nº Recibo</th>\n\n                        </tr>\n                        <tr class=\"conteudo\" v-for=\"(inscricao, tableKey) in allInscricoes\" :key=\"tableKey\">\n                            <td>{{ inscricao.nome}}</td>\n                            <td>{{ inscricao.email }}</td>\n                            <td>{{ inscricao.flagPrimeiroEvento == true ? 'Sim' : 'Não' }}</td>\n                            <td>{{ inscricao.flagCompareceu == true ? 'Sim' : 'Não' }}</td>\n                            <td>{{ inscricao.necessitaPagamento == true ? 'Sim' : 'Não' }}</td>\n                            <td>{{ inscricao.valor == -1 ? \"\" : inscricao.valor }}</td>\n                            <td>{{ inscricao.recibo == -1 ? \"\" : inscricao.recibo }}</td>\n                            <td class=\"buttons\" v-if=\"inscricao.necessitaPagamento\">\n                                <div class=\"editarButton\">\n                                    <a class=\"fas fa-credit-card\" v-on:click=\"editar(inscricao)\" title=\"Editar\"></a>\n                                </div>\n                                <div class=\"registarCompareceu\">\n                                    <a class=\"fas fa-check\" v-on:click=\"registarComparecimento(inscricao)\"\n                                       title=\"Comparência\"></a>\n                                </div>\n                            </td>\n                        </tr>\n                    </table>\n                </div>\n            </div>\n            <h1 v-else>\n                Sem inscrições no Evento\n            </h1>\n        </div>\n    </div>\n</template>\n<script>\n    var axios = require(\"axios\");\n    axios.interceptors.response.use(\n        response => response,\n        error => {\n            if (error.response.status === 401) {\n                bus.$emit(\"logout\");\n            }\n        });\n    import {bus} from \"../../main.js\";\n\n    export default {\n        data() {\n            return {\n                allInscricoes: null,\n                registarPagamento: false,\n                registarComparecimentoTodosText: \"Alterar Comparências do Evento\"\n            };\n        },\n        props: {\n            dadosEvento: {\n                type: Object,\n                required: true\n            }\n        },\n        activated() {\n            axios\n                .get(`api/getInscricoesPagamentoEvento/${this.dadosEvento.idEvento}`, {\n                    withCredentials: true,\n                    headers: {Authorization: `Bearer ` + sessionStorage.getItem(\"token\")}\n                })\n                .then(response => {\n                    this.allInscricoes = response.data;\n                })\n                .catch(error => {\n                    if (error.response.status === 401) {\n                        this.$toasted.error(\"Sessão expirou.\");\n                        bus.$emit(\"logout\");\n                    }\n                });\n        },\n        methods: {\n            switchComponent(comp) {\n                bus.$emit(\"switchComp\", comp);\n            },\n            editar(data) {\n                bus.$emit(\"registarPagamentoInscricao\", data);\n            },\n            registarComparecimento(inscricao) {\n                axios\n                    .patch(`api/patchComparecimentoInscricao/${this.dadosEvento.idEvento}/${inscricao.idParticipante}`, null, {\n                        withCredentials: true,\n                        headers: {Authorization: `Bearer ` + sessionStorage.getItem(\"token\")}\n                    })\n                    .then(response => {\n                        inscricao.flagCompareceu = !inscricao.flagCompareceu;\n                        if (inscricao.flagCompareceu) {\n                            this.$toasted.show(\"Comparecimento registado com sucesso!\");\n                        } else {\n                            this.$toasted.show(\"Falta de comparência registada com sucesso!\");\n                        }\n\n                        if (response.status == 409) {\n                            this.$toasted.error(\"Ocorreu um erro\");\n                        }\n\n                    })\n                    .catch(error => {\n                        if (error.response.status === 401) {\n                            this.$toasted.error(\"Sessão expirou.\");\n                            bus.$emit(\"logout\");\n                        }\n                    });\n            },\n            registarComparecimentoTodos() {\n                axios\n                    .patch(`api/patchComparecimentoInscricao/${this.dadosEvento.idEvento}`, null, {\n                        withCredentials: true,\n                        headers: {Authorization: `Bearer ` + sessionStorage.getItem(\"token\")}\n                    })\n                    .then(response => {\n                        this.allInscricoes.forEach(function (part, index, theArray) {\n                            theArray[index].flagCompareceu = !theArray[index].flagCompareceu;\n                        });\n\n                        this.$toasted.show(\"Comparências alteradas com sucesso!\");\n\n\n                        if (response.status == 409) {\n                            this.$toasted.error(\"Ocorreu um erro\");\n                        }\n                    })\n                    .catch(error => {\n                        if (error.response.status === 401) {\n                            this.$toasted.error(\"Sessão expirou.\");\n                            bus.$emit(\"logout\");\n                        }\n                    });\n            }\n\n        }\n    }\n</script>\n<style>\n\n\n    .voltarEvento button {\n        font-size: 20px;\n        margin-left: 25px;\n        cursor: pointer;\n        border: none;\n        border-radius: 4px;\n        background-color: #eedec0;\n    }\n\n    .voltarEvento i {\n        font-size: 17px;\n        margin-right: 3px;\n    }\n\n    .voltarEvento button:hover {\n        background-color: #fdf5e6\n    }\n\n    .inscricoes h1 {\n        text-align: center;\n    }\n\n    .inscricoes {\n        font-family: \"Open Sans\";\n    }\n\n    .inscricoes .tabela {\n        width: 100%;\n        margin-bottom: 20px;\n    }\n\n    .inscricoes #tabela {\n        width: 80%;\n        margin-top: 10px;\n    }\n\n    .inscricoes .dados .idEvento {\n        width: 5%;\n    }\n\n    .inscricoes .tabela table td {\n        border: 1px solid #ccc;\n    }\n\n    .inscricoes .dados table td {\n        width: 25%;\n    }\n\n    .inscricoes .tabela table th {\n        border: 1px solid #ccc;\n    }\n\n    .inscricoes .tabela .conteudo:hover {\n        font-weight: bold;\n        background-color: #e2e2e2;\n    }\n\n    .inscricoes .dados {\n        display: flex;\n        justify-content: center;\n    }\n\n    .inscricoes .editarButton {\n        cursor: pointer;\n    }\n\n    .inscricoes .editarButton a:hover {\n        font-weight: bold;\n        font-size: 13px;\n\n    }\n\n    .inscricoes .registarCompareceu {\n        cursor: pointer;\n    }\n\n    .inscricoes .registarCompareceu a:hover {\n        font-weight: bold;\n        font-size: 13px;\n\n    }\n\n\n    .inscricoes .dados .buttons {\n        border-color: white;\n        background-color: white;\n        border-top: none;\n        border: none;\n    }\n\n    .inscricoes .buttonRegistarComparecimentoTodos {\n        margin-top: 10px;\n        margin-left: 10%;\n        display: flex;\n    }\n\n    .inscricoes .buttonRegistarComparecimentoTodos button {\n        text-align: center;\n        cursor: pointer;\n        background-color: #a2e3fb;\n        border: none;\n        border-radius: 4px;\n    }\n\n    .inscricoes .buttonRegistarComparecimentoTodos button:hover {\n        background-color: #43cbfd;;\n    }\n\n\n</style>"]}]}