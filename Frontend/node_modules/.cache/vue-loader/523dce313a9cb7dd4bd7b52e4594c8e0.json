{"remainingRequest":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Projeto Final\\Entrega\\Software\\Frontend\\src\\components\\LoginScreen.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\src\\components\\LoginScreen.vue","mtime":1617391304096},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8qIGVzbGludC1kaXNhYmxlICovCnZhciBheGlvcyA9IHJlcXVpcmUoImF4aW9zIik7CmF4aW9zLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoCiAgcmVzcG9uc2UgPT4gcmVzcG9uc2UsCiAgZXJyb3IgPT4gewogICAgICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHsgCiAgICAgICAgYnVzLiRlbWl0KCJsb2dvdXQiKTsKICAgICAgfQogfSk7CiB2YXIgaW5zdGFuY2UgPSBheGlvcy5jcmVhdGUoewogICAgICAgICAgdmFsaWRhdGVTdGF0dXM6IGZ1bmN0aW9uIChzdGF0dXMpIHsKICAgICAgICAgICAgcmV0dXJuIHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwOwogICAgICAgICAgfQogICAgICB9KTsKCi8vaW1wb3J0IHJvdXRlciBmcm9tICIuLi9yb3V0ZXIiCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTG9naW5TY3JlZW4iLAogIGRhdGEoKSB7CiAgICB2YXIgaGVyZSA9IHRoaXM7CiAgICByZXR1cm4gewogICAgICBpbnB1dDogewogICAgICAgIHVzZXJuYW1lOiAiIiwKICAgICAgICBwYXNzd29yZDogIiIKICAgICAgfSwKICAgICAgY2hhbmdlUGFzc0Jvb2w6IGZhbHNlLAogICAgICBhbGVydEJvb2w6IGZhbHNlLAogICAgICBhbGVydFN0cmluZzogIkZvaSBlbnZpYWRvIHVtIGVtYWlsIGNvbSBpbnN0cnXDp8O1ZXMuIgogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICBheGlvcwogICAgICAuZ2V0KCJhcGkvdmFsaWRhdGVUb2tlbiIsIHsKICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUsCiAgICAgICAgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiBgQmVhcmVyIGAgKyBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpIH0KICAgICAgfSkKICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMSkgewogICAgICAgICAgdGhpcy4kZW1pdCgiYXV0aCIsIHRydWUpOwogICAgICAgIH0KICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHsKICAgICAgICAgIHRoaXMuJGVtaXQoImF1dGgiLCBmYWxzZSk7CiAgICAgICAgfQogICAgICB9KTsKICB9LAogIGFjdGl2YXRlZCgpIHsKICAgIHRoaXMuaW5wdXQudXNlcm5hbWUgPSAiIjsKICAgIHRoaXMuaW5wdXQucGFzc3dvcmQgPSAiIjsKICB9LAogIG1ldGhvZHM6IHsKICAgICBhbHRlclBhc3M6IGZ1bmN0aW9uKCkgewogICAgICBpbnN0YW5jZQogICAgICAgIC5wb3N0KCJhcGkvcmVxdWVzdFBhc3N3b3JkUmVzZXQiLCB7CiAgICAgICAgICB1c2VybmFtZTogdGhpcy5pbnB1dC51c2VybmFtZS5yZXBsYWNlKC9bIlwiXCciXS9nLCAiIil9LAogICAgICAgICkKICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5hbGVydFN0cmluZyA9ICJGb2kgZW52aWFkbyB1bSBlbWFpbCBjb20gaW5zdHJ1w6fDtWVzLiI7CiAgICAgICAgICAgICAgdGhpcy5zaG93QWxlcnQoKQogICAgICAgIH0pCiAgICAgICAgIC5jYXRjaChlcnJvciA9PnsKICAgICAgICAgIHRoaXMuYWxlcnRTdHJpbmcgPSAiT2NvcnJldSB1bSBlcnJvIjsKICAgICAgICAgIHRoaXMuc2hvd0FsZXJ0KCkKICAgICAgICB9KTsKICAgIH0sCiAgICBzaG93QWxlcnQ6IGZ1bmN0aW9uKCkgewogICAgICB0aGlzLmFsZXJ0Qm9vbCA9IHRydWU7CiAgICB9LAogICAgc2hvdzogZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMuY2hhbmdlUGFzc0Jvb2wgPSB0cnVlOwogICAgfSwKICAgIGhpZGU6IGZ1bmN0aW9uKCkgewogICAgICB0aGlzLmNoYW5nZVBhc3NCb29sID0gZmFsc2U7CiAgICAgIHRoaXMuYWxlcnRCb29sID0gZmFsc2U7CiAgICB9LAogICAgZG9Mb2dpbjogZnVuY3Rpb24oZXZlbnQpIHsKCiAgICAgIGxldCBkYXRhID0gewogICAgICAgIHVzZXJuYW1lOiB0aGlzLmlucHV0LnVzZXJuYW1lLnJlcGxhY2UoL1siXCJcJyJdL2csICIiKSwKICAgICAgICBwYXNzd29yZDogdGhpcy5pbnB1dC5wYXNzd29yZC5yZXBsYWNlKC9bIlwiXCciXS9nLCAiIikKICAgICAgfTsKCiAgICAgIGF4aW9zCiAgICAgICAgLnBvc3QoImFwaS9sb2dpbiIsIGRhdGEpCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgidG9rZW4iLCByZXNwb25zZS5kYXRhLnRva2VuKTsKICAgICAgICAgIHRoaXMuJGVtaXQoImF1dGgiLCB0cnVlKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnJvcnMgPT4gewoKICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuZXJyb3IoIkVtYWlsIG91IFBhc3N3b3JkIGluY29ycmVjdG9zISIpOwogICAgICAgIH0pOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["LoginScreen.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"LoginScreen.vue","sourceRoot":"src/components","sourcesContent":["\n<template>\n  <div class=\"login\">\n    <br>\n    <template v-if=\"!this.changePassBool\">\n      <div id=\"fazerLogin\" class=\"w3-panel\">\n        <h1>Login</h1>\n        <div id=\"fields\" class=\"campos\">\n          <form>\n          <label>\n            <input type=\"email\" name=\"username\" v-model=\"input.username\" placeholder=\"Username\">\n          </label>\n          <label>\n            <input type=\"password\" name=\"password\" v-model=\"input.password\" placeholder=\"Password\">\n          </label>\n          <br>\n          <div class=\"buttons\">\n            <label>\n              <button type=\"submit\" v-on:click.prevent=\"doLogin()\">Login</button>\n            </label>\n            \n            <br>\n            <label class=\"reset\">\n              <a v-on:click.prevent=\"show()\">Esqueci-me da password</a>\n            </label>\n          </div>\n          </form>\n        </div>\n      </div>\n    </template>\n    <template v-else>\n      <div id=\"mudarPass\" class=\"w3-panel\">\n        <div id=\"fields\" class=\"camposMudarPass\">\n          <h3>Alterar Password</h3>\n          <label>\n            Introduza o seu email:\n            <input type=\"email\" v-model=\"input.username\" placeholder=\"e-mail\">\n          </label>\n          <label class=\"btnEnviar\">\n            <button v-on:click.prevent=\"alterPass()\">Enviar</button>\n          </label>\n          <label class=\"btnCancelar\">\n            <button v-on:click.prevent=\"hide()\">Cancelar</button>\n          </label>\n        </div>\n      </div>\n      <template v-if=\"alertBool\">{{this.alertString}}</template>\n    </template>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nvar axios = require(\"axios\");\naxios.interceptors.response.use(\n  response => response,\n  error => {\n      if (error.response.status === 401) { \n        bus.$emit(\"logout\");\n      }\n });\n var instance = axios.create({\n          validateStatus: function (status) {\n            return status >= 200 && status < 300;\n          }\n      });\n\n//import router from \"../router\"\nexport default {\n  name: \"LoginScreen\",\n  data() {\n    var here = this;\n    return {\n      input: {\n        username: \"\",\n        password: \"\"\n      },\n      changePassBool: false,\n      alertBool: false,\n      alertString: \"Foi enviado um email com instruções.\"\n    };\n  },\n  mounted() {\n    axios\n      .get(\"api/validateToken\", {\n        withCredentials: true,\n        headers: { Authorization: `Bearer ` + sessionStorage.getItem(\"token\") }\n      })\n      .then(response => {\n        if (response.status === 201) {\n          this.$emit(\"auth\", true);\n        }\n        if (response.status === 401) {\n          this.$emit(\"auth\", false);\n        }\n      });\n  },\n  activated() {\n    this.input.username = \"\";\n    this.input.password = \"\";\n  },\n  methods: {\n     alterPass: function() {\n      instance\n        .post(\"api/requestPasswordReset\", {\n          username: this.input.username.replace(/[\"\\\"\\'\"]/g, \"\")},\n        )\n        .then(response => {\n              this.alertString = \"Foi enviado um email com instruções.\";\n              this.showAlert()\n        })\n         .catch(error =>{\n          this.alertString = \"Ocorreu um erro\";\n          this.showAlert()\n        });\n    },\n    showAlert: function() {\n      this.alertBool = true;\n    },\n    show: function() {\n      this.changePassBool = true;\n    },\n    hide: function() {\n      this.changePassBool = false;\n      this.alertBool = false;\n    },\n    doLogin: function(event) {\n\n      let data = {\n        username: this.input.username.replace(/[\"\\\"\\'\"]/g, \"\"),\n        password: this.input.password.replace(/[\"\\\"\\'\"]/g, \"\")\n      };\n\n      axios\n        .post(\"api/login\", data)\n        .then(response => {\n          sessionStorage.setItem(\"token\", response.data.token);\n          this.$emit(\"auth\", true);\n        })\n        .catch(errors => {\n\n          this.$toasted.error(\"Email ou Password incorrectos!\");\n        });\n    }\n  }\n};\n</script>\n\n<style>\n@import url(\"https://fonts.googleapis.com/css?family=Open+Sans\");\n@import url(\"https://www.w3schools.com/w3css/4/w3.css\");\n\n#fazerLogin {\n  width: 30%;\n  padding: 10px;\n  border: 3px solid lightgray;\n  overflow: hidden;\n}\n\n#mudarPass {\n  padding: 10px;\n  border: 3px solid lightgray;\n  width: 25%;\n}\n\n.login {\n  font-family: \"Open Sans\";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n#fields {\n  padding: 3px;\n}\n\n.login .campos input {\n  margin-bottom: 15px;\n  width: 100%;\n}\n\n.login .campos button {\n  cursor: pointer;\n}\n\n.login .campos .buttons {\n  display: flex;\n}\n\n\n\n.login .campos a {\n  cursor: pointer;\n  display: inline-block;\n  margin-left: 10px;\n  color: #0645ad;\n  text-decoration: underline;\n}\n\n\n.login .camposMudarPass button {\n  cursor: pointer;\n}\n\n.login .camposMudarPass .btnEnviar {\n  margin-left: 10px;\n}\n\n.login .camposMudarPass input {\n  width: 75%;\n}\n</style>"]}]}