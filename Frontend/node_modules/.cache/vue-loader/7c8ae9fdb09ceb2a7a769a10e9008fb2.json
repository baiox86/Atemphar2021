{"remainingRequest":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Projeto Final\\Entrega\\Software\\Frontend\\src\\components\\registos\\RegistarDonativo.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\src\\components\\registos\\RegistarDonativo.vue","mtime":1617391304645},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Projeto Final\\Entrega\\Software\\Frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8qIGVzbGludC1kaXNhYmxlICovCnZhciBheGlvcyA9IHJlcXVpcmUoImF4aW9zIik7CmF4aW9zLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoCiAgcmVzcG9uc2UgPT4gcmVzcG9uc2UsCiAgZXJyb3IgPT4gewogICAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgIGJ1cy4kZW1pdCgibG9nb3V0Iik7CiAgICB9CiAgfQopOwoKaW1wb3J0IHsgYnVzIH0gZnJvbSAiLi4vLi4vbWFpbi5qcyI7CmltcG9ydCB7IE1vZGVsTGlzdFNlbGVjdCB9IGZyb20gInZ1ZS1zZWFyY2gtc2VsZWN0IjsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICB0aXBvRG9uYXRpdm86IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIGlmICh0aGlzLnRpcG9Eb25hdGl2byA9PT0gInAiKSB7CiAgICAgIGF4aW9zCiAgICAgICAgLmdldCgiYXBpL2dldEFsbFBlc3NvYXMiLCB7CiAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUsCiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgYCArIHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInRva2VuIikKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIHRoaXMuYWxsUGVyc29ucyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyb3IgPT4gewoKICAgICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGF4aW9zCiAgICAgICAgLmdldCgiYXBpL2dldEFsbEVtcHJlc2FyaW9zIiwgewogICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlLAogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyIGAgKyBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICB0aGlzLmFsbEVtcHJlc2FyaW9zID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnJvciA9PiB7CgogICAgICAgIH0pOwogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHZhciBoZXJlID0gdGhpczsKICAgIHJldHVybiB7CiAgICAgIGlucHV0OiB7CiAgICAgICAgbm92YVBlc3NvYTogZmFsc2UsCiAgICAgICAgaWRFbXByZXNhcmlvOiAiIiwKICAgICAgICBpZFBlc3NvYTogIiIsCiAgICAgICAgZGF0YURvbmF0aXZvOiAiIiwKICAgICAgICBtb3JhZGE6ICIiLAogICAgICAgIGNvZGlnb1Bvc3RhbDogIiIsCiAgICAgICAgcXVhbnRpZGFkZURvbmF0aXZvOiAwLjAxLAogICAgICAgIG9ic2VydmFjb2VzOiAiIgogICAgICB9LAogICAgICBpbnB1dFBlc3NvYTogewogICAgICAgIG5vbWU6ICIiLAogICAgICAgIGVtYWlsOiAiIiwKICAgICAgICBnZW5lcm86ICIiLAogICAgICAgIGRhdGFOYXNjOiAiIiwKICAgICAgICB0ZWxlZm9uZTogIiIsCiAgICAgICAgem9uYTogIiIsCiAgICAgICAgbmlmOiAiIiwKICAgICAgICBjb21vQ29uaGVjZXU6ICJQZXNzb2EiLAogICAgICAgIGF0cmF2ZXNEZTogIiIKICAgICAgfSwKICAgICAgaXNOb3ZvQW1pZ29Tb2NpbzogdHJ1ZSwKICAgICAgYWxsUGVyc29uczogW10sCiAgICAgIGFsbEVtcHJlc2FyaW9zOiBbXSwKICAgICAgZW1wcmVzYUVtcHJlc2FyaW86ICIiLAogICAgICBidXR0b25UZXh0OiAiQWRpY2lvbmFyIFBlc3NvYSIKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgImlucHV0LmlkUGVzc29hIjogZnVuY3Rpb24oKSB7CiAgICAgIGF4aW9zCiAgICAgICAgLmdldCgiYXBpL2dldEFtaWdvU29jaW8vIiArIHRoaXMuaW5wdXQuaWRQZXNzb2EsIHsKICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZSwKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciBgICsgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgdGhpcy5jaGVja0lmQW1pZ29Tb2NpbyhyZXNwb25zZS5kYXRhLmxlbmd0aCA9PT0gMCk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyb3IgPT4gewoKICAgICAgICB9KTsKICAgIH0sCiAgICAiaW5wdXQuaWRFbXByZXNhcmlvIjogZnVuY3Rpb24oKSB7CiAgICAgIGF4aW9zCiAgICAgICAgLmdldCgiYXBpL2dldERhZG9zRW1wcmVzYXJpby8iICsgdGhpcy5pbnB1dC5pZEVtcHJlc2FyaW8sIHsKICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZSwKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciBgICsgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgdGhpcy5lbXByZXNhRW1wcmVzYXJpbyA9IHJlc3BvbnNlLmRhdGFbMF0ubm9tZUVtcHJlc2E7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyb3IgPT4gewoKICAgICAgICB9KTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGNoZWNrSWZBbWlnb1NvY2lvOiBmdW5jdGlvbihzdGF0dXMpIHsKICAgICAgaWYgKHN0YXR1cykgewogICAgICAgIHRoaXMuaXNOb3ZvQW1pZ29Tb2NpbyA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pc05vdm9BbWlnb1NvY2lvID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBjbGVhckZpZWxkczogZnVuY3Rpb24oKSB7CiAgICAgIHN3aXRjaCAodGhpcy50aXBvRG9uYXRpdm8pIHsKICAgICAgICBjYXNlICJwIjoKICAgICAgICAgIGJ1cy4kZW1pdCgicmVmcmVzaEFtaWdvU29jaW8iKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgImUiOgogICAgICAgICAgYnVzLiRlbWl0KCJyZWZyZXNoRW1wcmVzYSIpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0sCiAgICB0b2dnbGVJbnNlcnQ6IGZ1bmN0aW9uKCkgewogICAgICBpZiAoIXRoaXMuaW5wdXQubm92YVBlc3NvYSkgewogICAgICAgIHRoaXMuYnV0dG9uVGV4dCA9ICJDYW5jZWxhciI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5idXR0b25UZXh0ID0gIkFkaWNpb25hciBQZXNzb2EiOwogICAgICB9CiAgICAgIHRoaXMuaW5wdXQubm92YVBlc3NvYSA9ICF0aGlzLmlucHV0Lm5vdmFQZXNzb2E7CiAgICB9LAogICAgc3VibWl0OiBmdW5jdGlvbigpIHsKICAgICAgaWYgKHRoaXMuaW5wdXQuZGF0YURvbmF0aXZvID09ICIiIHx8IHRoaXMuaW5wdXQuZGF0YURvbmF0aXZvID09IG51bGwpIHsKICAgICAgICB0aGlzLiR0b2FzdGVkLmVycm9yKCJjYW1wb3MgZW0gZmFsdGEhIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHN3aXRjaCAodGhpcy50aXBvRG9uYXRpdm8pIHsKICAgICAgICBjYXNlICJwIjoKICAgICAgICAgIC8vc2UgYSBwZXNzb2EgasOhIGZvciBhbWlnbyBzw7NjaW8sIG7Do28gw6kgbmVjZXNzw6FyaW8gaW5zZXJpciBuYSB0YWJlbGEuIFNlIG7Do28gZm9yLCB0ZW0gZGUgc2UgaW5zZXJpci4KICAgICAgICAgIC8vc2UgZm9yIHVtYSBwZXNzb2Egbm92YSwgZXN0w6EgZ2FyYW50aWRvIG7Do28gc2VyIGFtaWdvIHPDs2NpbwoKICAgICAgICAgIHZhciBpZFBlc3NvYUF1eCA9IHRoaXMuaW5wdXQuaWRQZXNzb2E7CgogICAgICAgICAgaWYgKHRoaXMuaW5wdXQucXVhbnRpZGFkZURvbmF0aXZvID09PSAwKSB7CiAgICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuZXJyb3IoIk7Do28gc2UgcG9kZSBlZmV0dWFyIHVtIGRvbmF0aXZvIGRlIHF1YW50aWRhZGUgMCEiKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgaWYgKAogICAgICAgICAgICB0aGlzLmlucHV0LmRhdGFEb25hdGl2byA9PSAiIiB8fAogICAgICAgICAgICB0aGlzLmlucHV0LmRhdGFEb25hdGl2byA9PSBudWxsCiAgICAgICAgICApIHsKICAgICAgICAgICAgdGhpcy4kdG9hc3RlZC5lcnJvcigiQ2FtcG9zIG9icmlnYXTDs3Jpb3MgZW0gZmFsdGEhIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodGhpcy5pbnB1dC5ub3ZhUGVzc29hKSB7CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICB0aGlzLmlucHV0UGVzc29hLm5vbWUgPT0gIiIgfHwKICAgICAgICAgICAgICB0aGlzLmlucHV0UGVzc29hLm5vbWUgPT0gbnVsbCB8fAogICAgICAgICAgICAgIHRoaXMuaW5wdXRQZXNzb2EuZW1haWwgPT0gIiIgfHwKICAgICAgICAgICAgICB0aGlzLmlucHV0UGVzc29hLmVtYWlsID09IG51bGwgfHwKICAgICAgICAgICAgICB0aGlzLmlucHV0UGVzc29hLmdlbmVybyA9PSAiIiB8fAogICAgICAgICAgICAgIHRoaXMuaW5wdXRQZXNzb2EuZ2VuZXJvID09IG51bGwgfHwKICAgICAgICAgICAgICB0aGlzLmlucHV0UGVzc29hLnRlbGVmb25lID09ICIiIHx8CiAgICAgICAgICAgICAgdGhpcy5pbnB1dFBlc3NvYS50ZWxlZm9uZSA9PSBudWxsIHx8CiAgICAgICAgICAgICAgdGhpcy5pbnB1dFBlc3NvYS56b25hID09ICIiIHx8CiAgICAgICAgICAgICAgdGhpcy5pbnB1dFBlc3NvYS56b25hID09IG51bGwgfHwKICAgICAgICAgICAgICB0aGlzLmlucHV0UGVzc29hLmRhdGFOYXNjID09ICIiIHx8CiAgICAgICAgICAgICAgdGhpcy5pbnB1dFBlc3NvYS5kYXRhTmFzYyA9PSBudWxsIHx8CiAgICAgICAgICAgICAgdGhpcy5pbnB1dC5jb2RpZ29Qb3N0YWwgPT0gIiIgfHwKICAgICAgICAgICAgICB0aGlzLmlucHV0LmNvZGlnb1Bvc3RhbCA9PSBudWxsIHx8CiAgICAgICAgICAgICAgdGhpcy5pbnB1dC5tb3JhZGEgPT0gIiIgfHwKICAgICAgICAgICAgICB0aGlzLmlucHV0Lm1vcmFkYSA9PSBudWxsCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuZXJyb3IoImNhbXBvcyBlbSBmYWx0YSEiKTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh0aGlzLmlucHV0UGVzc29hLnRlbGVmb25lLmxlbmd0aCAhPSA5KSB7CiAgICAgICAgICAgICAgdGhpcy4kdG9hc3RlZC5lcnJvcigiTsO6bWVybyBkZSB0ZWxlZm9uZSBkZSB0YW1hbmhvIGludsOhbGlkbyEiKTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghL15cZCskLy50ZXN0KHRoaXMuaW5wdXRQZXNzb2EudGVsZWZvbmUpKSB7CiAgICAgICAgICAgICAgdGhpcy4kdG9hc3RlZC5lcnJvcigiY2FyYWN0ZXJlcyBpbnbDoWxpZG9zIG5vIG7Dum1lcm8gZGUgdGVsZWZvbmUhIik7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgoKICAgICAgICAgICAgaWYodGhpcy5pbnB1dFBlc3NvYS5uaWYgIT0gIiIgJiYgdGhpcy5pbnB1dFBlc3NvYS5uaWYubGVuZ3RoICE9IDkpewogICAgICAgICAgdGhpcy4kdG9hc3RlZC5lcnJvcigiTklGIGRlIHRhbWFuaG8gaW52w6FsaWRvISIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgICAgIGlmICghL1xTK0BcUytcLlxTKy8udGVzdCh0aGlzLmlucHV0UGVzc29hLmVtYWlsKSkgewogICAgICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuZXJyb3IoIkZvcm1hdG8gZGUgZW1haWwgaW52w6FsaWRvISIpOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKCiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICB0aGlzLmlucHV0UGVzc29hLmNvbW9Db25oZWNldS52YWx1ZU9mKCkgIT0gIkxvY2FsIi52YWx1ZU9mKCkgJiYKICAgICAgICAgICAgICAodGhpcy5pbnB1dFBlc3NvYS5hdHJhdmVzRGUgPT0gbnVsbCB8fAogICAgICAgICAgICAgICAgdGhpcy5pbnB1dFBlc3NvYS5hdHJhdmVzRGUgPT0gIiIpCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuZXJyb3IoIk9icmlnYXTDs3JpbyBzZWxlY2lvbmFyIHBlc3NvYSBwb3Igb25kZSBjb25oZWNldSEiKTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgICAgLnBvc3QoCiAgICAgICAgICAgICAgICAiYXBpL3Bvc3RQZXNzb2EiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBub21lOiB0aGlzLmlucHV0UGVzc29hLm5vbWUsCiAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLmlucHV0UGVzc29hLmVtYWlsLAogICAgICAgICAgICAgICAgICB0ZWxlZm9uZTogdGhpcy5pbnB1dFBlc3NvYS50ZWxlZm9uZSwKICAgICAgICAgICAgICAgICAgem9uYTogdGhpcy5pbnB1dFBlc3NvYS56b25hLAogICAgICAgICAgICAgICAgICBkYXRhTmFzYzogdGhpcy5pbnB1dFBlc3NvYS5kYXRhTmFzYywKICAgICAgICAgICAgICAgICAgZ2VuZXJvOiB0aGlzLmlucHV0UGVzc29hLmdlbmVybywKICAgICAgICAgICAgICAgICAgbmlmOiB0aGlzLmlucHV0UGVzc29hLm5pZiwKICAgICAgICAgICAgICAgICAgY29tb0NvbmhlY2V1OgogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXQuY29tb0NvbmhlY2V1ID09PSAiTG9jYWwiCiAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuaW5wdXRQZXNzb2EuYXRyYXZlc0RlCiAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuaW5wdXRQZXNzb2EuY29tb0NvbmhlY2V1LAogICAgICAgICAgICAgICAgICBhdHJhdmVzRGU6CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dFBlc3NvYS5jb21vQ29uaGVjZXUgPT09ICJMb2NhbCIKICAgICAgICAgICAgICAgICAgICAgID8gbnVsbAogICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLmlucHV0UGVzc29hLmF0cmF2ZXNEZQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlLAogICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciBgICsgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKQogICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEgPT0gJzEwNjInKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdGVkLmVycm9yKCJOSUYgb3UgZW1haWwgasOhIGV4aXN0ZW50ZXMhIFBvc3PDrXZlbCBwZXNzb2EgZHVwbGljYWRhISIpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy9pbnNlcmltb3MgYSBwZXNzb2EsIGFnb3JhIGluc2VyaW1vcyBvIGFtaWdvIHPDs2NpbyBlIG8gZG9uYXRpdm8uCgogICAgICAgICAgICAgICAgaWRQZXNzb2FBdXggPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgYXhpb3MKICAgICAgICAgICAgICAgICAgLnBvc3QoCiAgICAgICAgICAgICAgICAgICAgImFwaS9wb3N0QW1pZ29Tb2NpbyIsCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgaWRBbWlnb1NvY2lvOiBpZFBlc3NvYUF1eCwKICAgICAgICAgICAgICAgICAgICAgIG1vcmFkYTogdGhpcy5pbnB1dC5tb3JhZGEsCiAgICAgICAgICAgICAgICAgICAgICBjb2RpZ29Qb3N0YWw6IHRoaXMuaW5wdXQuY29kaWdvUG9zdGFsLAogICAgICAgICAgICAgICAgICAgICAgZGF0YUV4cGlyYWNhbzogdGhpcy5pbnB1dC5kYXRhRG9uYXRpdm8ucmVwbGFjZSgKICAgICAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLAogICAgICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkgKyAxCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246CiAgICAgICAgICAgICAgICAgICAgICAgICAgYEJlYXJlciBgICsgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAxKSB7CiAgICAgICAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdGVkLmVycm9yKCJOb3ZvIEFtaWdvIFPDs2NpbyBpbnNlcmlkbyEiKTsKICAgICAgICAgICAgICAgICAgICAgIC8vYXF1aSBpbnNlcmltb3MgbyBkb25hdGl2bwogICAgICAgICAgICAgICAgICAgICAgYXhpb3MKICAgICAgICAgICAgICAgICAgICAgICAgLnBvc3QoCiAgICAgICAgICAgICAgICAgICAgICAgICAgIi9hcGkvcG9zdERvbmF0aXZvUGVzc29hLyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRQZXNzb2E6IGlkUGVzc29hQXV4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YURvbmF0aXZvOiB0aGlzLmlucHV0LmRhdGFEb25hdGl2bywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vcmFkYTogdGhpcy5pbnB1dC5tb3JhZGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RpZ29Qb3N0YWw6IHRoaXMuaW5wdXQuY29kaWdvUG9zdGFsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVhbnRpZGFkZURvbmF0aXZvOiB0aGlzLmlucHV0LnF1YW50aWRhZGVEb25hdGl2bywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmFjb2VzOiB0aGlzLmlucHV0Lm9ic2VydmFjb2VzCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYEJlYXJlciBgICsgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdGVkLmVycm9yKCJOb3ZvIERvbmF0aXZvIGluc2VyaWRvISIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJGaWVsZHMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdGVkLmVycm9yKCJTZXNzw6NvIGV4cGlyb3UuIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kdG9hc3RlZC5lcnJvcigiU2Vzc8OjbyBleHBpcm91LiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVzLiRlbWl0KCJsb2dvdXQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kdG9hc3RlZC5lcnJvcigiRXJybyBhIGluc2VyaXIgQW1pZ28gU8OzY2lvISIpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgICAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdGVkLmVycm9yKCJTZXNzw6NvIGV4cGlyb3UuIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMSkgewogICAgICAgICAgICAgICAgICAgICAgdGhpcy4kdG9hc3RlZC5lcnJvcigiU2Vzc8OjbyBleHBpcm91LiIpOwogICAgICAgICAgICAgICAgICAgICAgYnVzLiRlbWl0KCJsb2dvdXQiKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kdG9hc3RlZC5lcnJvcigiRXJybyBhIGluc2VyaXIgQW1pZ28gU8OzY2lvISIpOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC5jYXRjaCgpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgLy9uw6NvIMOpIHVtYSBwZXNzb2Egbm92YSwgdmVyaWZpY2Ftb3Mgc2UgbsOjbyDDqSBhaW5kYSB1bSBhbWlnbyBzw7NjaW8KICAgICAgICAgIGlmICh0aGlzLmlzTm92b0FtaWdvU29jaW8pIHsKICAgICAgICAgICAgaWYoCiAgICAgICAgICAgICAgdGhpcy5pbnB1dC5jb2RpZ29Qb3N0YWwgPT0gIiIgfHwKICAgICAgICAgICAgICB0aGlzLmlucHV0LmNvZGlnb1Bvc3RhbCA9PSBudWxsIHx8CiAgICAgICAgICAgICAgdGhpcy5pbnB1dC5tb3JhZGEgPT0gIiIgfHwKICAgICAgICAgICAgICB0aGlzLmlucHV0Lm1vcmFkYSA9PSBudWxsCiAgICAgICAgICAgICl7CiAgICAgICAgICAgICAgdGhpcy4kdG9hc3RlZC5lcnJvcigiQ2FtcG9zIGVtIGZhbHRhISIpOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmICghL15cZHs0fSgtXGR7M30pPyQvLnRlc3QodGhpcy5pbnB1dC5jb2RpZ29Qb3N0YWwpKSB7CiAgICAgICAgICAgICAgdGhpcy4kdG9hc3RlZC5lcnJvcigiRm9ybWF0byBkZSBjw7NkaWdvIHBvc3RhbCBpbnbDoWxpZG8hIik7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgICAgLnBvc3QoCiAgICAgICAgICAgICAgICAiYXBpL3Bvc3RBbWlnb1NvY2lvIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgaWRBbWlnb1NvY2lvOiBpZFBlc3NvYUF1eCwKICAgICAgICAgICAgICAgICAgbW9yYWRhOiB0aGlzLmlucHV0Lm1vcmFkYSwKICAgICAgICAgICAgICAgICAgY29kaWdvUG9zdGFsOiB0aGlzLmlucHV0LmNvZGlnb1Bvc3RhbCwKICAgICAgICAgICAgICAgICAgZGF0YUV4cGlyYWNhbzogdGhpcy5pbnB1dC5kYXRhRG9uYXRpdm8ucmVwbGFjZSgKICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCksCiAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpICsgMQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUsCiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyIGAgKyBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAxKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuZXJyb3IoIk5vdm8gQW1pZ28gU8OzY2lvIGluc2VyaWRvISIpOwogICAgICAgICAgICAgICAgICAvL2luc2VyaXIgbyBkb25hdGl2bwogICAgICAgICAgICAgICAgICBheGlvcwogICAgICAgICAgICAgICAgICAgIC5wb3N0KAogICAgICAgICAgICAgICAgICAgICAgIi9hcGkvcG9zdERvbmF0aXZvUGVzc29hLyIsCiAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlkUGVzc29hOiBpZFBlc3NvYUF1eCwKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YURvbmF0aXZvOiB0aGlzLmlucHV0LmRhdGFEb25hdGl2bywKICAgICAgICAgICAgICAgICAgICAgICAgbW9yYWRhOiB0aGlzLmlucHV0Lm1vcmFkYSwKICAgICAgICAgICAgICAgICAgICAgICAgY29kaWdvUG9zdGFsOiB0aGlzLmlucHV0LmNvZGlnb1Bvc3RhbCwKICAgICAgICAgICAgICAgICAgICAgICAgcXVhbnRpZGFkZURvbmF0aXZvOiB0aGlzLmlucHV0LnF1YW50aWRhZGVEb25hdGl2bywKICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2YWNvZXM6IHRoaXMuaW5wdXQub2JzZXJ2YWNvZXMKICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgQmVhcmVyIGAgKyBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuZXJyb3IoIk5vdm8gRG9uYXRpdm8gaW5zZXJpZG8hIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyRmllbGRzKCk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuZXJyb3IoIlNlc3PDo28gZXhwaXJvdS4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnVzLiRlbWl0KCJsb2dvdXQiKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuZXJyb3IoIkVycm8gYSBpbnNlcmlyIEFtaWdvIFPDs2NpbyEiKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkgewogICAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdGVkLmVycm9yKCJTZXNzw6NvIGV4cGlyb3UuIik7CiAgICAgICAgICAgICAgICAgIGJ1cy4kZW1pdCgibG9nb3V0Iik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuZXJyb3IoIlNlc3PDo28gZXhwaXJvdS4iKTsKICAgICAgICAgICAgICAgICAgYnVzLiRlbWl0KCJsb2dvdXQiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuZXJyb3IoIkVycm8gYSBpbnNlcmlyIEFtaWdvIFPDs2NpbyEiKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vasOhIMOpIGFtaWdvIHPDs2NpbywKICAgICAgICAgICAgLy9iYXN0YSBpbnNlcmlyIG8gZG9uYXRpdm8gZSBhdHVhbGl6YXIgbyBzw7NjaW8KICAgICAgICAgICAgYXhpb3MKICAgICAgICAgICAgICAucG9zdCgKICAgICAgICAgICAgICAgICIvYXBpL3Bvc3REb25hdGl2b1Blc3NvYS8iLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBpZFBlc3NvYTogaWRQZXNzb2FBdXgsCiAgICAgICAgICAgICAgICAgIGRhdGFEb25hdGl2bzogdGhpcy5pbnB1dC5kYXRhRG9uYXRpdm8sCiAgICAgICAgICAgICAgICAgIG1vcmFkYTogdGhpcy5pbnB1dC5tb3JhZGEsCiAgICAgICAgICAgICAgICAgIGNvZGlnb1Bvc3RhbDogdGhpcy5pbnB1dC5jb2RpZ29Qb3N0YWwsCiAgICAgICAgICAgICAgICAgIHF1YW50aWRhZGVEb25hdGl2bzogdGhpcy5pbnB1dC5xdWFudGlkYWRlRG9uYXRpdm8sCiAgICAgICAgICAgICAgICAgIG9ic2VydmFjb2VzOiB0aGlzLmlucHV0Lm9ic2VydmFjb2VzCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUsCiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyIGAgKyBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAxKSB7CiAgICAgICAgICAgICAgICAgIC8vdGhpcy5pbnB1dC5kYXRhRG9uYXRpdm8uc2V0WWVhcih0aGlzLmlucHV0LmRhdGFEb25hdGl2by5nZXRZZWFyKCkgKyAxKQogICAgICAgICAgICAgICAgICAvL3VwZGF0ZSBBbWlnbyBTw7NjaW8KICAgICAgICAgICAgICAgICAgYXhpb3MKICAgICAgICAgICAgICAgICAgICAucHV0KAogICAgICAgICAgICAgICAgICAgICAgIi9hcGkvZWRpdEFtaWdvU29jaW8vIiArIGlkUGVzc29hQXV4LAogICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBkYXRhRXhwaXJhY2FvOiB0aGlzLmlucHV0LmRhdGFEb25hdGl2by5yZXBsYWNlKAogICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkgKyAxCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgQmVhcmVyIGAgKyBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgdGhpcy4kdG9hc3RlZC5lcnJvcigiTm92byBkb25hdGl2byBpbnNlcmlkbyEiKTsKICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJGaWVsZHMoKTsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7CgogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuZXJyb3IoIkVycm8gYSBpbnNlcmlyIGRvbmF0aXZvISIpOwoKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAKICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAiZSI6CiAgICAgICAgICBpZih0aGlzLmlucHV0LmlkRW1wcmVzYXJpbyA9PSAiIiB8fCB0aGlzLmlucHV0LmlkRW1wcmVzYXJpbyA9PSBudWxsKXsKICAgICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuZXJyb3IoIkNhbXBvcyBlbSBmYWx0YSEiKTsKICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgIC5wb3N0KAogICAgICAgICAgICAgICIvYXBpL3Bvc3REb25hdGl2b0VtcHJlc2EvIiwKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZEVtcHJlc2FyaW86IHRoaXMuaW5wdXQuaWRFbXByZXNhcmlvLAogICAgICAgICAgICAgICAgZGF0YURvbmF0aXZvOiB0aGlzLmlucHV0LmRhdGFEb25hdGl2bywKICAgICAgICAgICAgICAgIHF1YW50aWRhZGVEb25hdGl2bzogdGhpcy5pbnB1dC5xdWFudGlkYWRlRG9uYXRpdm8sCiAgICAgICAgICAgICAgICBvYnNlcnZhY29lczogdGhpcy5pbnB1dC5vYnNlcnZhY29lcwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlLAogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyIGAgKyBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICApCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDEpIHsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdGhpcy4kdG9hc3RlZC5lcnJvcigiTm92byBkb25hdGl2byBpbnNlcmlkbyEiKTsKICAgICAgICAgICAgICB0aGlzLmNsZWFyRmllbGRzKCk7CiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdGVkLmVycm9yKCJTZXNzw6NvIGV4cGlyb3UuIik7CiAgICAgICAgICAgICAgICBidXMuJGVtaXQoImxvZ291dCIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHsKICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuZXJyb3IoIlNlc3PDo28gZXhwaXJvdS4iKTsKICAgICAgICAgICAgICAgIGJ1cy4kZW1pdCgibG9nb3V0Iik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRoaXMuJHRvYXN0ZWQuZXJyb3IoIkVycm8gYSBpbnNlcmlyIGRvbmF0aXZvISIpOwoKICAgICAgICAgICAgfSk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgTW9kZWxMaXN0U2VsZWN0CiAgfQp9Owo="},{"version":3,"sources":["RegistarDonativo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RegistarDonativo.vue","sourceRoot":"src/components/registos","sourcesContent":["<template>\n  <div>\n    <div class=\"registarDonativo\">\n      <div class=\"fields\">\n        <template v-if=\"tipoDonativo == 'p'\">\n          <div class=\"novaPessoa\">\n            <a class=\"fas fa-user-plus\">\n              <input type=\"button\" v-model=\"buttonText\" v-on:click=\"toggleInsert()\" />\n            </a>\n          </div>\n\n          <template v-if=\"!input.novaPessoa\">\n            <!-- já frequentou, user existente -->\n            <div class=\"listaPessoas\">\n              <label>\n                Pessoa:\n                <i class=\"obrigatorio\">*</i>\n              </label>\n              <br />\n              <!--\n          <input name=\"inputPessoa\" v-model=\"input.inputPessoa\" list=\"listaPessoa\">\n          <datalist id=\"listaPessoa\">\n            <option v-for=\"(pessoa, key) in allPessoa\" :key=\"key\">{{pessoa.idPessoa}}: {{pessoa.nome}}</option> \n          </datalist>\n              -->\n              <model-list-select\n                :list=\"allPersons\"\n                v-model=\"input.idPessoa\"\n                option-value=\"idPessoa\"\n                option-text=\"nome\"\n                placeholder=\"Escolher\"\n              ></model-list-select>\n            </div>\n          </template>\n          <template v-else>\n            <!-- user novo -->\n            <div class=\"nome\">\n              <label>\n                Nome:\n                <i class=\"obrigatorio\">*</i>\n              </label>\n              <br />\n              <input type=\"text\" v-model=\"inputPessoa.nome\" name=\"nome\" />\n            </div>\n            <div class=\"email\">\n              <label>\n                Email:\n                <i class=\"obrigatorio\">*</i>\n              </label>\n              <br />\n              <input type=\"text\" v-model=\"inputPessoa.email\" name=\"email\" />\n            </div>\n            <div class=\"telefone\">\n              <label>\n                Telefone:\n                <i class=\"obrigatorio\">*</i>\n              </label>\n              <br />\n              <input type=\"text\" v-model=\"inputPessoa.telefone\" name=\"telefone\" />\n            </div>\n            <div class=\"genero\">\n              <label>\n                Género:\n                <i class=\"obrigatorio\">*</i>\n              </label>\n              <br />\n              <input type=\"radio\" v-model=\"inputPessoa.genero\" name=\"m\" value=\"M\" /> M\n              <br />\n              <input type=\"radio\" v-model=\"inputPessoa.genero\" name=\"f\" value=\"F\" /> F\n              <br />\n            </div>\n            <div class=\"zona\">\n              <label>\n                Zona:\n                <i class=\"obrigatorio\">*</i>\n              </label>\n              <br />\n              <input type=\"text\" v-model=\"inputPessoa.zona\" name=\"zona\" />\n            </div>\n            <div class=\"idade\">\n              <label>\n                Data de Nascimento:\n                <i class=\"obrigatorio\">*</i>\n              </label>\n              <br />\n              <input type=\"date\" v-model=\"inputPessoa.dataNasc\" name=\"idade\" />\n            </div>\n            <div class=\"nif\">\n              <label>NIF:</label>\n              <br />\n              <input type=\"text\" v-model=\"inputPessoa.nif\" name=\"nif\" />\n            </div>\n            <div class=\"comoConheceu\">\n              <label>Como Conheceu:</label>\n              <br />\n              <select v-model=\"inputPessoa.comoConheceu\">\n                <option>Pessoa</option>\n                <option value=\"Local\">Folheto em Local</option>\n                <option>Redes Sociais</option>\n                <option>E-Mail</option>\n              </select>\n              <template\n                v-if=\"inputPessoa.comoConheceu === 'Pessoa' || inputPessoa.comoConheceu === 'Redes Sociais' || inputPessoa.comoConheceu === 'E-Mail'\"\n              >\n                <div class=\"atravesQuem\">\n                  <model-list-select\n                    :list=\"allPersons\"\n                    v-model=\"inputPessoa.atravesDe\"\n                    option-value=\"idPessoa\"\n                    option-text=\"nome\"\n                    placeholder=\"Escolher\"\n                  ></model-list-select>\n                </div>\n              </template>\n              <template v-else-if=\"inputPessoa.comoConheceu === 'Local'\">\n                <!-- conheceu através de um folheto num local -->\n                <!--<label>Local:</label>\n                <br>-->\n                <div class=\"local\">\n                  <input\n                    type=\"text\"\n                    v-model=\"inputPessoa.atravesDe\"\n                    name=\"local\"\n                    placeholder=\"Local\"\n                  />\n                </div>\n              </template>\n            </div>\n          </template>\n        </template>\n        <template v-else-if=\"tipoDonativo == 'e'\">\n          <div class=\"empresario\">\n            <label>\n              Empresario:\n              <i class=\"obrigatorio\">*</i>\n            </label>\n            <br />\n            <model-list-select\n              :list=\"allEmpresarios\"\n              v-model=\"input.idEmpresario\"\n              option-value=\"idPessoa\"\n              option-text=\"nome\"\n              placeholder=\"Escolher\"\n            ></model-list-select>\n          </div>\n          <div class=\"empresa\">\n            <label>Empresa: {{this.empresaEmpresario}}</label>\n          </div>\n        </template>\n        <div class=\"quantidade\">\n          <label>\n            Quantidade:\n            <i class=\"obrigatorio\">*</i>\n          </label>\n          <br />\n          <input\n            type=\"number\"\n            v-model=\"input.quantidadeDonativo\"\n            name=\"quantidade\"\n            min=\"0.01\"\n            step=\"0.01\"\n          />\n        </div>\n        <div class=\"data\">\n          <label>\n            Data:\n            <i class=\"obrigatorio\">*</i>\n          </label>\n          <br />\n          <input type=\"date\" v-model=\"input.dataDonativo\" name=\"data\" />\n        </div>\n        <template v-if=\"(isNovoAmigoSocio || input.novaPessoa ) && tipoDonativo != 'e'\">\n          <div class=\"morada\">\n            <label>\n              Morada:\n              <i class=\"obrigatorio\">*</i>\n            </label>\n            <br />\n            <textarea type=\"text\" v-model=\"input.morada\" name=\"observacoes\"></textarea>\n          </div>\n          <div class=\"codPostal\">\n            <label>\n              Código Postal:\n              <i class=\"obrigatorio\">*</i>\n            </label>\n            <br />\n            <input type=\"text\" v-model=\"input.codigoPostal\" name=\"observacoes\" />\n          </div>\n        </template>\n        <div class=\"observacoes\">\n          <label>Observações:</label>\n          <br />\n          <textarea type=\"text\" v-model=\"input.observacoes\" name=\"observacoes\"></textarea>\n        </div>\n        <div class=\"registar\">\n          <button type=\"submit\" v-on:click.prevent=\"submit()\">\n            <i class=\"far fa-save\"></i> Registar\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nvar axios = require(\"axios\");\naxios.interceptors.response.use(\n  response => response,\n  error => {\n    if (error.response.status === 401) {\n      bus.$emit(\"logout\");\n    }\n  }\n);\n\nimport { bus } from \"../../main.js\";\nimport { ModelListSelect } from \"vue-search-select\";\nexport default {\n  props: {\n    tipoDonativo: {\n      type: String,\n      required: true\n    }\n  },\n  mounted() {\n    if (this.tipoDonativo === \"p\") {\n      axios\n        .get(\"api/getAllPessoas\", {\n          withCredentials: true,\n          headers: {\n            Authorization: `Bearer ` + sessionStorage.getItem(\"token\")\n          }\n        })\n        .then(response => {\n          this.allPersons = response.data;\n        })\n        .catch(error => {\n\n        });\n    } else {\n      axios\n        .get(\"api/getAllEmpresarios\", {\n          withCredentials: true,\n          headers: {\n            Authorization: `Bearer ` + sessionStorage.getItem(\"token\")\n          }\n        })\n        .then(response => {\n          this.allEmpresarios = response.data;\n        })\n        .catch(error => {\n\n        });\n    }\n  },\n  data() {\n    var here = this;\n    return {\n      input: {\n        novaPessoa: false,\n        idEmpresario: \"\",\n        idPessoa: \"\",\n        dataDonativo: \"\",\n        morada: \"\",\n        codigoPostal: \"\",\n        quantidadeDonativo: 0.01,\n        observacoes: \"\"\n      },\n      inputPessoa: {\n        nome: \"\",\n        email: \"\",\n        genero: \"\",\n        dataNasc: \"\",\n        telefone: \"\",\n        zona: \"\",\n        nif: \"\",\n        comoConheceu: \"Pessoa\",\n        atravesDe: \"\"\n      },\n      isNovoAmigoSocio: true,\n      allPersons: [],\n      allEmpresarios: [],\n      empresaEmpresario: \"\",\n      buttonText: \"Adicionar Pessoa\"\n    };\n  },\n  watch: {\n    \"input.idPessoa\": function() {\n      axios\n        .get(\"api/getAmigoSocio/\" + this.input.idPessoa, {\n          withCredentials: true,\n          headers: {\n            Authorization: `Bearer ` + sessionStorage.getItem(\"token\")\n          }\n        })\n        .then(response => {\n          this.checkIfAmigoSocio(response.data.length === 0);\n        })\n        .catch(error => {\n\n        });\n    },\n    \"input.idEmpresario\": function() {\n      axios\n        .get(\"api/getDadosEmpresario/\" + this.input.idEmpresario, {\n          withCredentials: true,\n          headers: {\n            Authorization: `Bearer ` + sessionStorage.getItem(\"token\")\n          }\n        })\n        .then(response => {\n          this.empresaEmpresario = response.data[0].nomeEmpresa;\n        })\n        .catch(error => {\n\n        });\n    }\n  },\n  methods: {\n    checkIfAmigoSocio: function(status) {\n      if (status) {\n        this.isNovoAmigoSocio = true;\n      } else {\n        this.isNovoAmigoSocio = false;\n      }\n    },\n    clearFields: function() {\n      switch (this.tipoDonativo) {\n        case \"p\":\n          bus.$emit(\"refreshAmigoSocio\");\n          break;\n        case \"e\":\n          bus.$emit(\"refreshEmpresa\");\n          break;\n      }\n    },\n    toggleInsert: function() {\n      if (!this.input.novaPessoa) {\n        this.buttonText = \"Cancelar\";\n      } else {\n        this.buttonText = \"Adicionar Pessoa\";\n      }\n      this.input.novaPessoa = !this.input.novaPessoa;\n    },\n    submit: function() {\n      if (this.input.dataDonativo == \"\" || this.input.dataDonativo == null) {\n        this.$toasted.error(\"campos em falta!\");\n        return;\n      }\n      switch (this.tipoDonativo) {\n        case \"p\":\n          //se a pessoa já for amigo sócio, não é necessário inserir na tabela. Se não for, tem de se inserir.\n          //se for uma pessoa nova, está garantido não ser amigo sócio\n\n          var idPessoaAux = this.input.idPessoa;\n\n          if (this.input.quantidadeDonativo === 0) {\n            this.$toasted.error(\"Não se pode efetuar um donativo de quantidade 0!\");\n            return;\n          }\n          if (\n            this.input.dataDonativo == \"\" ||\n            this.input.dataDonativo == null\n          ) {\n            this.$toasted.error(\"Campos obrigatórios em falta!\");\n            return;\n          }\n\n          if (this.input.novaPessoa) {\n            if (\n              this.inputPessoa.nome == \"\" ||\n              this.inputPessoa.nome == null ||\n              this.inputPessoa.email == \"\" ||\n              this.inputPessoa.email == null ||\n              this.inputPessoa.genero == \"\" ||\n              this.inputPessoa.genero == null ||\n              this.inputPessoa.telefone == \"\" ||\n              this.inputPessoa.telefone == null ||\n              this.inputPessoa.zona == \"\" ||\n              this.inputPessoa.zona == null ||\n              this.inputPessoa.dataNasc == \"\" ||\n              this.inputPessoa.dataNasc == null ||\n              this.input.codigoPostal == \"\" ||\n              this.input.codigoPostal == null ||\n              this.input.morada == \"\" ||\n              this.input.morada == null\n            ) {\n              this.$toasted.error(\"campos em falta!\");\n              return;\n            }\n\n            if (this.inputPessoa.telefone.length != 9) {\n              this.$toasted.error(\"Número de telefone de tamanho inválido!\");\n              return;\n            }\n\n            if (!/^\\d+$/.test(this.inputPessoa.telefone)) {\n              this.$toasted.error(\"caracteres inválidos no número de telefone!\");\n              return;\n            }\n\n\n            if(this.inputPessoa.nif != \"\" && this.inputPessoa.nif.length != 9){\n          this.$toasted.error(\"NIF de tamanho inválido!\");\n          return;\n        }\n\n            if (!/\\S+@\\S+\\.\\S+/.test(this.inputPessoa.email)) {\n              this.$toasted.error(\"Formato de email inválido!\");\n              return;\n            }\n\n\n            if (\n              this.inputPessoa.comoConheceu.valueOf() != \"Local\".valueOf() &&\n              (this.inputPessoa.atravesDe == null ||\n                this.inputPessoa.atravesDe == \"\")\n            ) {\n              this.$toasted.error(\"Obrigatório selecionar pessoa por onde conheceu!\");\n              return;\n            }\n\n            axios\n              .post(\n                \"api/postPessoa\",\n                {\n                  nome: this.inputPessoa.nome,\n                  email: this.inputPessoa.email,\n                  telefone: this.inputPessoa.telefone,\n                  zona: this.inputPessoa.zona,\n                  dataNasc: this.inputPessoa.dataNasc,\n                  genero: this.inputPessoa.genero,\n                  nif: this.inputPessoa.nif,\n                  comoConheceu:\n                    this.input.comoConheceu === \"Local\"\n                      ? this.inputPessoa.atravesDe\n                      : this.inputPessoa.comoConheceu,\n                  atravesDe:\n                    this.inputPessoa.comoConheceu === \"Local\"\n                      ? null\n                      : this.inputPessoa.atravesDe\n                },\n                {\n                  withCredentials: true,\n                  headers: {\n                    Authorization: `Bearer ` + sessionStorage.getItem(\"token\")\n                  }\n                }\n              )\n              .then(response => {\n                if(response.data == '1062'){\n                    this.$toasted.error(\"NIF ou email já existentes! Possível pessoa duplicada!\");\n                    return;\n                  }\n                //inserimos a pessoa, agora inserimos o amigo sócio e o donativo.\n\n                idPessoaAux = response.data;\n                axios\n                  .post(\n                    \"api/postAmigoSocio\",\n                    {\n                      idAmigoSocio: idPessoaAux,\n                      morada: this.input.morada,\n                      codigoPostal: this.input.codigoPostal,\n                      dataExpiracao: this.input.dataDonativo.replace(\n                        new Date().getFullYear(),\n                        new Date().getFullYear() + 1\n                      )\n                    },\n                    {\n                      withCredentials: true,\n                      headers: {\n                        Authorization:\n                          `Bearer ` + sessionStorage.getItem(\"token\")\n                      }\n                    }\n                  )\n                  .then(response => {\n                    if (response.status === 201) {\n                      this.$toasted.error(\"Novo Amigo Sócio inserido!\");\n                      //aqui inserimos o donativo\n                      axios\n                        .post(\n                          \"/api/postDonativoPessoa/\",\n                          {\n                            idPessoa: idPessoaAux,\n                            dataDonativo: this.input.dataDonativo,\n                            morada: this.input.morada,\n                            codigoPostal: this.input.codigoPostal,\n                            quantidadeDonativo: this.input.quantidadeDonativo,\n                            observacoes: this.input.observacoes\n                          },\n                          {\n                            withCredentials: true,\n                            headers: {\n                              Authorization:\n                                `Bearer ` + sessionStorage.getItem(\"token\")\n                            }\n                          }\n                        )\n                        .then(response => {\n                          if (response.status === 201) {\n                            this.$toasted.error(\"Novo Donativo inserido!\");\n                            clearFields();\n                            return;\n                          }\n                          if (response.status === 401) {\n                            this.$toasted.error(\"Sessão expirou.\");\n                          }\n                        })\n                        .catch(error => {\n                          if (error.response.status === 401) {\n                            this.$toasted.error(\"Sessão expirou.\");\n                            bus.$emit(\"logout\");\n                          }\n                          this.$toasted.error(\"Erro a inserir Amigo Sócio!\");\n                        });\n                    }\n                    if (response.status === 401) {\n                      this.$toasted.error(\"Sessão expirou.\");\n                    }\n                  })\n                  .catch(error => {\n                    if (error.response.status === 401) {\n                      this.$toasted.error(\"Sessão expirou.\");\n                      bus.$emit(\"logout\");\n                    }\n                    this.$toasted.error(\"Erro a inserir Amigo Sócio!\");\n                  });\n              })\n              .catch();\n            return;\n          }\n\n          //não é uma pessoa nova, verificamos se não é ainda um amigo sócio\n          if (this.isNovoAmigoSocio) {\n            if(\n              this.input.codigoPostal == \"\" ||\n              this.input.codigoPostal == null ||\n              this.input.morada == \"\" ||\n              this.input.morada == null\n            ){\n              this.$toasted.error(\"Campos em falta!\");\n              return;\n            }\n\n            \n            if (!/^\\d{4}(-\\d{3})?$/.test(this.input.codigoPostal)) {\n              this.$toasted.error(\"Formato de código postal inválido!\");\n              return;\n            }\n            axios\n              .post(\n                \"api/postAmigoSocio\",\n                {\n                  idAmigoSocio: idPessoaAux,\n                  morada: this.input.morada,\n                  codigoPostal: this.input.codigoPostal,\n                  dataExpiracao: this.input.dataDonativo.replace(\n                    new Date().getFullYear(),\n                    new Date().getFullYear() + 1\n                  )\n                },\n                {\n                  withCredentials: true,\n                  headers: {\n                    Authorization: `Bearer ` + sessionStorage.getItem(\"token\")\n                  }\n                }\n              )\n              .then(response => {\n                if (response.status === 201) {\n                  this.$toasted.error(\"Novo Amigo Sócio inserido!\");\n                  //inserir o donativo\n                  axios\n                    .post(\n                      \"/api/postDonativoPessoa/\",\n                      {\n                        idPessoa: idPessoaAux,\n                        dataDonativo: this.input.dataDonativo,\n                        morada: this.input.morada,\n                        codigoPostal: this.input.codigoPostal,\n                        quantidadeDonativo: this.input.quantidadeDonativo,\n                        observacoes: this.input.observacoes\n                      },\n                      {\n                        withCredentials: true,\n                        headers: {\n                          Authorization:\n                            `Bearer ` + sessionStorage.getItem(\"token\")\n                        }\n                      }\n                    )\n                    .then(response => {\n                      if (response.status === 201) {\n                        this.$toasted.error(\"Novo Donativo inserido!\");\n                        clearFields();\n                      }\n                    })\n                    .catch(error => {\n                      if (error.response.status === 401) {\n                        this.$toasted.error(\"Sessão expirou.\");\n                        bus.$emit(\"logout\");\n                      }\n                      this.$toasted.error(\"Erro a inserir Amigo Sócio!\");\n                    });\n                }\n                if (response.status === 401) {\n                  this.$toasted.error(\"Sessão expirou.\");\n                  bus.$emit(\"logout\");\n                }\n              })\n              .catch(error => {\n                if (error.response.status === 401) {\n                  this.$toasted.error(\"Sessão expirou.\");\n                  bus.$emit(\"logout\");\n                }\n                this.$toasted.error(\"Erro a inserir Amigo Sócio!\");\n              });\n          } else {\n            //já é amigo sócio,\n            //basta inserir o donativo e atualizar o sócio\n            axios\n              .post(\n                \"/api/postDonativoPessoa/\",\n                {\n                  idPessoa: idPessoaAux,\n                  dataDonativo: this.input.dataDonativo,\n                  morada: this.input.morada,\n                  codigoPostal: this.input.codigoPostal,\n                  quantidadeDonativo: this.input.quantidadeDonativo,\n                  observacoes: this.input.observacoes\n                },\n                {\n                  withCredentials: true,\n                  headers: {\n                    Authorization: `Bearer ` + sessionStorage.getItem(\"token\")\n                  }\n                }\n              )\n              .then(response => {\n                if (response.status === 201) {\n                  //this.input.dataDonativo.setYear(this.input.dataDonativo.getYear() + 1)\n                  //update Amigo Sócio\n                  axios\n                    .put(\n                      \"/api/editAmigoSocio/\" + idPessoaAux,\n                      {\n                        dataExpiracao: this.input.dataDonativo.replace(\n                          new Date().getFullYear(),\n                          new Date().getFullYear() + 1\n                        )\n                      },\n                      {\n                        withCredentials: true,\n                        headers: {\n                          Authorization:\n                            `Bearer ` + sessionStorage.getItem(\"token\")\n                        }\n                      }\n                    )\n                    .then(() => {\n                      this.$toasted.error(\"Novo donativo inserido!\");\n                      this.clearFields();\n                    })\n                    .catch(error => {\n\n                    });\n                }\n              })\n              .catch(error => {\n                this.$toasted.error(\"Erro a inserir donativo!\");\n\n              });\n          }\n  \n        break;\n\n        case \"e\":\n          if(this.input.idEmpresario == \"\" || this.input.idEmpresario == null){\n             this.$toasted.error(\"Campos em falta!\");\n             return;\n          }\n          axios\n            .post(\n              \"/api/postDonativoEmpresa/\",\n              {\n                idEmpresario: this.input.idEmpresario,\n                dataDonativo: this.input.dataDonativo,\n                quantidadeDonativo: this.input.quantidadeDonativo,\n                observacoes: this.input.observacoes\n              },\n              {\n                withCredentials: true,\n                headers: {\n                  Authorization: `Bearer ` + sessionStorage.getItem(\"token\")\n                }\n              }\n            )\n            .then(response => {\n              if (response.status === 201) {\n              }\n              this.$toasted.error(\"Novo donativo inserido!\");\n              this.clearFields();\n              if (response.status === 401) {\n                this.$toasted.error(\"Sessão expirou.\");\n                bus.$emit(\"logout\");\n              }\n            })\n            .catch(error => {\n              if (error.response.status === 401) {\n                this.$toasted.error(\"Sessão expirou.\");\n                bus.$emit(\"logout\");\n              }\n              this.$toasted.error(\"Erro a inserir donativo!\");\n\n            });\n          break;\n      }\n    }\n  },\n  components: {\n    ModelListSelect\n  }\n};\n</script>\n\n<style>\n@import url(\"https://fonts.googleapis.com/css?family=Open+Sans\");\n@import url(\"https://www.w3schools.com/w3css/4/w3.css\");\n@import url(\"https://use.fontawesome.com/releases/v5.7.0/css/all.css\");\n\n.registarDonativo {\n  font-family: \"Open Sans\";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.registarDonativo .fields {\n  display: inline-grid;\n  grid-row-gap: 10px;\n  grid-column-gap: 50px;\n  background-color: oldlace;\n  width: 100%;\n}\n\n.registarDonativo .fields .obrigatorio {\n  color: red;\n}\n.registarDonativo .empresario {\n  grid-column-start: 1;\n  grid-row-start: 1;\n  margin-top: 10px;\n  margin-left: 115px;\n}\n\n.registarDonativo .empresa {\n  margin-right: 115px;\n  grid-row-start: 1;\n  grid-column-start: 2;\n  margin-top: 30px;\n  justify-self: start;\n}\n.registarDonativo .listaPessoas {\n  grid-column-start: 1;\n  grid-row-start: 1;\n  margin-top: 10px;\n  margin-left: 115px;\n}\n\n.registarDonativo .novaPessoa {\n  margin-right: 115px;\n  grid-row-start: 1;\n  grid-column-start: 2;\n  justify-self: end;\n  margin-top: 30px;\n}\n\n.registarDonativo .novaPessoa input {\n  border: none;\n  background-color: transparent;\n  cursor: pointer;\n}\n.registarDonativo .novaPessoa a {\n  border: 1px solid #a1a0a0;\n  height: 20px;\n}\n.registarDonativo .nome {\n  margin-left: 115px;\n  grid-column-start: 1;\n  grid-row-start: 2;\n}\n\n.registarDonativo .nome input {\n  width: 100%;\n  height: 35px;\n  border: 1px solid #a1a0a0;\n  padding-left: 3px;\n  border-radius: 4px;\n}\n\n.registarDonativo .email {\n  margin-right: 115px;\n  grid-column-start: 2;\n  grid-row-start: 2;\n}\n\n.registarDonativo .email input {\n  width: 100%;\n  height: 35px;\n  border: 1px solid #a1a0a0;\n  padding-left: 3px;\n  border-radius: 4px;\n}\n\n.registarDonativo .telefone {\n  margin-left: 115px;\n  grid-column-start: 1;\n  grid-row-start: 3;\n}\n\n.registarDonativo .telefone input {\n  width: 100%;\n  height: 35px;\n  border: 1px solid #a1a0a0;\n  padding-left: 3px;\n  border-radius: 4px;\n}\n\n.registarDonativo .genero {\n  margin-right: 115px;\n  grid-column-start: 2;\n  grid-row-start: 3;\n}\n\n.registarDonativo .idade {\n  margin-left: 115px;\n  grid-column-start: 1;\n  grid-row-start: 4;\n}\n\n.registarDonativo .idade input {\n  width: 100%;\n  height: 35px;\n  border: 1px solid #a1a0a0;\n  padding-left: 3px;\n  border-radius: 4px;\n}\n\n.registarDonativo .zona {\n  margin-right: 115px;\n  grid-column-start: 2;\n  grid-row-start: 4;\n}\n\n.registarDonativo .zona input {\n  width: 100%;\n  height: 35px;\n  border: 1px solid #a1a0a0;\n  padding-left: 3px;\n  border-radius: 4px;\n}\n\n.registarDonativo .nif {\n  margin-left: 115px;\n  grid-column-start: 1;\n  grid-row-start: 5;\n}\n\n.registarDonativo .nif input {\n  width: 100%;\n  height: 35px;\n  border: 1px solid #a1a0a0;\n  padding-left: 3px;\n  border-radius: 4px;\n}\n\n.registarDonativo .comoConheceu {\n  /*margin-right: 115px;*/\n  grid-column-start: 2;\n  grid-row-start: 5;\n  width: 50%;\n  display: -webkit-box;\n  height: 35px;\n}\n\n.registarDonativo .comoConheceu select {\n  border: 1px solid #a1a0a0;\n  border-radius: 4px;\n  height: 30px;\n}\n\n.registarDonativo .comoConheceu .atravesQuem {\n  margin-top: 11px;\n  width: 113%;\n  margin-left: 9px;\n}\n\n.registarDonativo .comoConheceu .local {\n  margin-top: 16px;\n  width: 100%;\n  margin-left: 9px;\n}\n\n.registarDonativo .comoConheceu .local input {\n  border: 1px solid #a1a0a0;\n  border-radius: 4px;\n  width: 115%;\n  height: 35px;\n}\n\n.registarDonativo .quantidade {\n  margin-left: 115px;\n  grid-column-start: 1;\n  grid-row-start: 6;\n}\n.registarDonativo .quantidade input {\n  width: 100%;\n  border: 1px solid #a1a0a0;\n  padding-left: 3px;\n  height: 35px;\n  border-radius: 4px;\n}\n\n.registarDonativo .data {\n  margin-right: 115px;\n  grid-column-start: 2;\n  grid-row-start: 6;\n}\n.registarDonativo .data input {\n  width: 100%;\n  border: 1px solid #a1a0a0;\n  padding-left: 3px;\n  height: 35px;\n  border-radius: 4px;\n}\n\n.registarDonativo .morada {\n  margin-left: 115px;\n  grid-column-start: 1;\n  grid-row-start: 7;\n}\n.registarDonativo .morada textarea {\n  width: 100%;\n  border: 1px solid #a1a0a0;\n  padding-left: 3px;\n  height: 70px;\n  border-radius: 4px;\n  box-sizing: border-box;\n  resize: none;\n}\n\n.registarDonativo .codPostal {\n  margin-right: 115px;\n  grid-column-start: 2;\n  grid-row-start: 7;\n}\n.registarDonativo .codPostal input {\n  width: 100%;\n  border: 1px solid #a1a0a0;\n  padding-left: 3px;\n  height: 35px;\n  border-radius: 4px;\n}\n\n.registarDonativo .observacoes {\n  margin-left: 115px;\n  grid-column-start: 1;\n  grid-row-start: 8;\n}\n.registarDonativo .observacoes textarea {\n  width: 100%;\n  height: 150px;\n  box-sizing: border-box;\n  border: 1px solid #a1a0a0;\n  resize: none;\n  border-radius: 4px;\n}\n\n.registarDonativo .registar {\n  margin-right: 115px;\n  margin-bottom: 30px;\n  grid-column-start: 2;\n  grid-row-start: 9;\n  align-self: end;\n  justify-self: end;\n}\n\n.registarDonativo .registar button {\n  height: 50px;\n  font-size: medium;\n  cursor: pointer;\n  border: none;\n  background-color: #e99d72;\n  border-radius: 6px;\n  padding-left: 15px;\n  padding-right: 15px;\n  margin: auto;\n}\n.registarDonativo .registar button:hover {\n  background-color: #fab995;\n}\n</style>"]}]}